const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/call-lusBi33f.Dq5L4hL4.js","assets/chunks/framework.SPHuL2wz.js","assets/chunks/defu.CMw4_7D2.js"])))=>i.map(i=>d[i]);
import{X as S,r as k,l as W,v as I,x as N,c as h,m as r,p as a,I as m,w as d,a8 as B,F as C,o as g,b as n,n as F,a2 as j,f as x,h as A}from"./chunks/framework.SPHuL2wz.js";import{_ as $}from"./chunks/Button.vue_vue_type_script_setup_true_lang.3Ev7LJQj.js";/* empty css                                                      */import{_ as M}from"./chunks/PdfViewer.vue_vue_type_style_index_0_lang.B2q8vNMD.js";import{_ as G}from"./chunks/Dropzone.vue_vue_type_script_setup_true_lang.lkLB1W5D.js";/* empty css                                                        */import{_ as J,I as K}from"./chunks/32.Cr7Lub9M.js";import{_ as E}from"./chunks/Heading.vue_vue_type_script_setup_true_lang.4r-avCXW.js";/* empty css                                                       */import{_ as X}from"./chunks/Caption.vue_vue_type_script_setup_true_lang.CnWm07eH.js";/* empty css                                                       */import{s as Y,h as Z}from"./chunks/index.DsJCb3Cq.js";import{_ as q}from"./chunks/Banner.vue_vue_type_script_setup_true_lang.CSYM5gs8.js";/* empty css                                                      */import{u as O}from"./chunks/use-preview.HROWzcya.js";import"./chunks/index.DvWHfs5K.js";import"./chunks/SpinnerRinggo.vue_vue_type_script_setup_true_lang.D-OV2fzw.js";import"./chunks/index.CMFNKP8Z.js";import"./chunks/index.CtS9oPBb.js";import"./chunks/index.B7h_B0kb.js";import"./chunks/use-idle.D-Jj5RP7.js";import"./chunks/focus.DWrlVhv-.js";import"./chunks/commonjsHelpers.BosuxZz1.js";import"./chunks/index.Cw4UG8Fj.js";import"./chunks/debounce.CE-8mXQa.js";import"./chunks/isObject.C3e4t58V.js";import"./chunks/baseGetTag.Cu32HCTk.js";import"./chunks/toNumber.Dcxq_36h.js";import"./chunks/isSymbol.BOom9x27.js";import"./chunks/isObjectLike.nLWjQ9zq.js";import"./chunks/toInteger.NZnbAWM7.js";import"./chunks/toString.CQAYsbsy.js";import"./chunks/isArray.Dxzbedgu.js";import"./chunks/noop.DX6rZLP_.js";import"./chunks/20.DTV9WS5k.js";import"./chunks/20.yrgiKqYP.js";import"./chunks/Divider.vue_vue_type_script_setup_true_lang.CiJvGeS5.js";/* empty css                                                       */import"./chunks/Select.vue_vue_type_style_index_0_lang.DHLM0GoY.js";import"./chunks/Dropdown.vue_vue_type_script_setup_true_lang.CQ708yjQ.js";import"./chunks/Dropdown.vue_vue_type_style_index_0_lang.CGBIO4n6.js";import"./chunks/use-focus.BMEofKAE.js";import"./chunks/floating-ui.dom.Bv9LQ7l_.js";import"./chunks/index.CFXyWZro.js";import"./chunks/DropdownHeader.vue_vue_type_style_index_0_lang.VpYOOyaE.js";import"./chunks/Subheading.vue_vue_type_style_index_0_lang.XYJwVcZV.js";import"./chunks/Input.vue_vue_type_script_setup_true_lang.BF6CHEOO.js";import"./chunks/20.BnLgBufB.js";import"./chunks/accept.6g-OpsWF.js";/* empty css                                                     */import"./chunks/Text.vue_vue_type_style_index_0_lang.Dtr1i7xx.js";import"./chunks/Label.vue_vue_type_script_setup_true_lang.3PTBta72.js";import"./chunks/Dot.vue_vue_type_script_setup_true_lang.Bsd97zNf.js";/* empty css                                                   */import"./chunks/16.B9F8soTy.js";/* empty css                                                     */import"./chunks/20.C9rmOJn2.js";import"./chunks/20.DdDac_Lg.js";import"./chunks/IconCheckbox.DaePqV--.js";import"./chunks/SpinnerRing.vue_vue_type_script_setup_true_lang.BDrztFIk.js";import"./chunks/value.C5X7htjv.js";import"./chunks/adapter.4Z9FinvO.js";import"./chunks/use-loading.QLGCNSV_.js";import"./chunks/defu.CMw4_7D2.js";import"./chunks/isNil.CHIgUVhi.js";import"./chunks/baseIteratee.CLkZHCNq.js";import"./chunks/Uint8Array.BQK0loFa.js";import"./chunks/Set.CfmJ7xMC.js";import"./chunks/eq.PE3UIL_r.js";import"./chunks/isArrayLike.C0g-NlKf.js";import"./chunks/setToArray.DyeysI-S.js";import"./chunks/baseUniq.B02YtUOM.js";import"./chunks/baseFindIndex.D7XfJLKM.js";import"./chunks/theme.E7F4qYX7.js";import"./chunks/base64.CRVHLH2y.js";import"./chunks/use-singleton.BlOnuHTI.js";import"./chunks/queue.DLTVddtq.js";/* empty css                                                       */import"./chunks/20.DPORPCuh.js";import"./chunks/20.DK0ZmXUB.js";import"./chunks/create-image.CkAV8b2h.js";import"./chunks/avatar.qWHUbXZ4.js";import"./chunks/color-hash.CY8Op1ql.js";const H={useWorker:typeof window<"u"&&!!window.Worker};function Q(){return H}function T(l){let e=l;const i=new Set;return{get value(){return e},set value(s){e=s;for(const c of i)c(s)},change(s){return i.add(s),()=>{i.delete(s)}},toBe(s){return new Promise(c=>{const y=this.change(w=>{w===s&&(y(),c())})})}}}const L=T(),z=T(!1);async function tt(){if(z.value&&await z.toBe(!1),!L.value){z.value=!0;try{const{default:l}=await S(async()=>{const{default:e}=await import("./chunks/worker-DSU9kkV3.BInE4CAo.js");return{default:e}},[]);L.value=new l({name:"rpc-worker"})}finally{z.value=!1}}return L.value}async function et(l,e){const i=Date.now(),s=await tt();return await new Promise((c,y)=>{const w=u=>{u.data.id===i&&(b(),u.data.error?y(u.data.error):c(u.data.result))},f=u=>{b(),y(u)},b=()=>{s.removeEventListener("message",w),s.removeEventListener("error",f)};s.addEventListener("message",w),s.addEventListener("error",f),s.postMessage({id:i,name:l,args:e})})}async function ot(l,e){return(await S(async()=>{const{callRPC:i}=await import("./chunks/call-lusBi33f.Dq5L4hL4.js");return{callRPC:i}},__vite__mapDeps([0,1,2]))).callRPC(l,e)}async function rt(l,e){return Q().useWorker?et(l,e):ot(l,e)}const it=async(...l)=>await rt("optimizePDF",l),st={class:"flex w-full min-h-screen"},at={key:0,class:"flex items-center justify-center w-full min-h-screen"},nt={class:"w-1/3 p-6 text-center"},lt={class:"mb-4"},pt=["onClick"],mt={class:"w-full border border-default dark:border-dark-default"},dt={class:"flex p-2"},ut={class:"flex-grow"},ft={class:"w-full border dark:border-dark-default"},ct={class:"flex p-2"},vt={class:"flex-grow"},_t={key:0},Ke=JSON.parse('{"title":"","description":"","frontmatter":{"layout":false},"headers":[],"relativePath":"tools/pdf-optimizer.md","filePath":"tools/pdf-optimizer.md"}'),wt={name:"tools/pdf-optimizer.md"},Xe=Object.assign(wt,{setup(l){const e=k(),i=k(),s=k(),c=k(),y=O(e),w=O(i),f=k(),b=k(),u=W(()=>{if(e.value&&i.value)return Math.round((i.value.size-e.value.size)/e.value.size*100)});I(e,async p=>{if(p)try{Y();const t=performance.now(),o=await it(p,{noTransparency:!1}),v=e.value.name.replace(".pdf",".compressed.pdf");i.value=new File([o],v,{type:"application/pdf"}),b.value=(performance.now()-t)/1e3}finally{Z()}}),N(p=>{var v,_;const t=(v=s.value)==null?void 0:v.container,o=(_=c.value)==null?void 0:_.container;if(t&&o){const P=()=>V(t,o),R=()=>V(o,t);t.addEventListener("scroll",P,{passive:!0}),o.addEventListener("scroll",R,{passive:!0}),p(()=>{t.removeEventListener("scroll",P),o.removeEventListener("scroll",R)})}});function V(p,t){t.scrollLeft=p.scrollLeft,t.scrollTop=p.scrollTop}function D(p,t=2,o=1024){if(p===0)return"0 Bytes";const v=[`${p>1?"Bytes":"Byte"}`,"KB","MB","GB","TB","PB","EB","ZB","YB"],_=Math.floor(Math.log(p)/Math.log(o));return`${Number.parseFloat((p/Math.pow(o,_)).toFixed(t))} ${v[_]}`}function U(){e.value=void 0,i.value=void 0}return(p,t)=>(g(),h("div",null,[r("div",st,[a(i)?(g(),h(C,{key:1},[r("div",mt,[m(M,{scale:a(f),"onUpdate:scale":t[1]||(t[1]=o=>B(f)?f.value=o:null),ref_key:"inputViewer",ref:s,src:a(y),layout:"fit"},{header:d(()=>[r("div",dt,[r("div",ut,[t[8]||(t[8]=n(" Original Size: ")),r("b",null,x(D(a(e).size)),1),t[9]||(t[9]=n("  "))]),m($,{size:"xs",onClick:U},{default:d(()=>t[10]||(t[10]=[n(" Close ")])),_:1})])]),_:1},8,["scale","src"])]),r("div",ft,[m(M,{scale:a(f),"onUpdate:scale":t[2]||(t[2]=o=>B(f)?f.value=o:null),ref_key:"outputViewer",ref:c,src:a(w),layout:"fit"},{header:d(()=>[r("div",ct,[r("div",vt,[t[11]||(t[11]=n(" Compressed Size: ")),r("b",null,x(D(a(i).size)),1),t[12]||(t[12]=n("  ")),r("span",{class:F(a(u)<0?"text-green-50":"text-red-50")},[a(u)>0?(g(),h("span",_t,"+")):A("",!0),n("("+x(a(u))+"%) ",1)],2),n(" Duration: "+x(a(b).toFixed(2))+"s ",1)]),m($,{href:a(w),download:a(i).name,color:"info",size:"xs"},{default:d(()=>t[13]||(t[13]=[n(" Download Compressed ")])),_:1},8,["href","download"])])]),_:1},8,["scale","src"])])],64)):(g(),h("div",at,[r("div",nt,[r("div",lt,[m(E,{element:"h3"},{default:d(()=>t[3]||(t[3]=[n(" PDF Optimizer ")])),_:1})]),m(G,{modelValue:a(e),"onUpdate:modelValue":t[0]||(t[0]=o=>B(e)?e.value=o:null),accept:"application/pdf"},{default:d(({isDragover:o,isHovered:v,model:_,browse:P})=>[r("div",{class:F(["flex flex-col items-center justify-center w-full p-6 space-y-3 border-2 border-dashed rounded aspect-video",[o?"bg-info dark:bg-dark-info border-info-emphasis dark:border-dark-info-emphasis":"bg-default dark:bg-dark-default border-default dark:border-dark-default"]])},[m(q,{variant:"danger",class:"text-start"},{default:d(()=>t[4]||(t[4]=[n(" Some content may be lost during compressing."),r("br",null,null,-1),r("strong",null,"Please take it at your own risk",-1)])),_:1}),m(J,{active:o||v},{default:d(()=>[m(K,{class:"w-20 h-20 my-5 fill-info-emphasis dark:fill-dark-info-emphasis"})]),_:2},1032,["active"]),m(E,{element:"h5"},{default:d(()=>t[5]||(t[5]=[n(" Upload Document ")])),_:1}),m(E,{element:"h6",class:"line-clamp-1"},{default:d(()=>[_?(g(),h(C,{key:1},[n(x(_.name),1)],64)):(g(),h(C,{key:0},[t[6]||(t[6]=n(" Drag your document here or click ")),r("a",{class:"text-info hover:underline",href:"#",onClick:j(P,["prevent"])},"Browse",8,pt)],64))]),_:2},1024)],2)]),_:1},8,["modelValue"]),m(X,{class:"my-4"},{default:d(()=>t[7]||(t[7]=[n(" Powered by: "),r("a",{class:"hover:underline decoration-dashed",href:"https://github.com/privy-open-source/ghoulscript",target:"_blank"},[r("b",null,"Ghoulscript")],-1)])),_:1})])]))])]))}});export{Ke as __pageData,Xe as default};
