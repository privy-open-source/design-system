import{p as J}from"./chunks/Button.6c0581b2.js";import{t as P}from"./chunks/index.bb7607a8.js";import{u as pe}from"./chunks/index.be437476.js";import{z as re,j as ce,_ as ie,N as de,h as T,f as ue,g as E,C as L,k as De,r as b,V as ye,o as H,c as O,m as t,B as V,n as W,a1 as Y,a2 as N,d as Fe,t as he,a,w as h,e as g,l as ge,y as M,u as d,b as _,J as B}from"./app.b96ee9a3.js";import{t as Z}from"./chunks/throttle.f0db56e4.js";import{p as me}from"./chunks/InputRange.4ce9a612.js";import{u as K}from"./chunks/utils-6ba05f5b.7e2434e1.js";import{I as ve,a as _e}from"./chunks/16.c0e25d73.js";import{c as Ce,E as G}from"./chunks/empty-img.7c281604.js";import{u as fe}from"./chunks/index.508c9306.js";import{f as Ae}from"./chunks/base64.9679b928.js";import{p as be}from"./chunks/index.f82077be.js";import{u as we}from"./chunks/index.85378ce9.js";import{j as Te}from"./chunks/index.8e95e3ae.js";import"./chunks/Button.vue_vue_type_style_index_0_lang.24e60717.js";import"./chunks/debounce.09764d19.js";import"./chunks/toNumber.685f5789.js";import"./chunks/isSymbol.b765f5ee.js";import"./chunks/isObjectLike.46b91259.js";import"./chunks/load-image.265b152a.js";import"./chunks/create-image.28dfb74f.js";import"./chunks/avatar.bd58a373.js";import"./chunks/color-hash.af77277d.js";function Ee(e,s){const n=re();ce(async()=>{if(e.value){const{default:l}=await ie(()=>import("./chunks/interact.min.b6164fcc.js").then(y=>y.i),["assets/chunks/interact.min.b6164fcc.js","assets/app.b96ee9a3.js"]),D=Z(s.onmove,1e3/120),r=Z(s.onpinch,1e3/120);n.value=l(e.value).styleCursor(!0).gesturable({inertia:!0,onstart:s.onstart,onmove:r,onend:r,modifiers:[l.modifiers.restrict({restriction:"parent",endOnly:!0})]}).draggable({inertia:!0,onstart:s.onstart,onmove:D,onend:D,modifiers:[l.modifiers.restrict({restriction:"parent",endOnly:!0})]})}}),de(async()=>{var l;(l=n.value)==null||l.unset()})}var Ie=K,Q=Ie.createSVGComponent(Q,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M2 28V16a2.0023 2.0023 0 012-2H16a2.0023 2.0023 0 012 2V28a2.0023 2.0023 0 01-2 2H4A2.0023 2.0023 0 012 28zM4 16L3.9988 28H16V16zM17 2l1.41 1.41L15.83 6H21a7.0078 7.0078 0 017 7v5H26V13a5.0057 5.0057 0 00-5-5H15.83l2.58 2.59L17 12 12 7z"}}]),Se=Q;const xe=Se;var Ve=K,X=Ve.createSVGComponent(X,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M28 30H16a2.0023 2.0023 0 01-2-2V16a2.0023 2.0023 0 012-2H28a2.0023 2.0023 0 012 2V28A2.0023 2.0023 0 0128 30zM16 16V28H28.0012L28 16zM15 2L13.59 3.41 16.17 6H11a7.0078 7.0078 0 00-7 7v5H6V13a5.0057 5.0057 0 015-5h5.17l-2.58 2.59L15 12l5-5z"}}]),ke=X;const Re=ke;function Ne(e){const{width:s,height:n,image:l,scale:D,angle:r,x:y,y:c,rounded:u}=e,F=e.canvas??Ce(s,n),i=F.getContext("2d"),A=l.width*D,w=l.height*D;if(F.width=s,F.height=n,i.clearRect(0,0,s,n),i.translate(s/2,n/2),i.rotate(r*Math.PI/180),i.translate(s/-2,n/-2),i.drawImage(l,(s-A)/2+y,(n-w)/2+c,A,w),u){const p=Math.min(s/2,n/2);i.globalCompositeOperation="destination-in",i.beginPath(),i.moveTo(p,0),i.arcTo(s,0,s,n,p),i.arcTo(s,n,0,n,p),i.arcTo(0,n,0,0,p),i.arcTo(0,0,s,0,p),i.closePath(),i.fill()}return F.toDataURL()}function Pe(e){return T(()=>e.width&&e.height?Number.parseFloat(`${e.width}`)/Number.parseFloat(`${e.height}`):e.ratio??1)}function ze(e){return T(()=>{if(e.width)return Number.parseFloat(`${e.width}`);if(e.height&&e.ratio)return Number.parseFloat(`${e.height}`)*e.ratio})}function qe(e){return T(()=>{if(e.height)return Number.parseFloat(`${e.height}`);if(e.width&&e.ratio)return Number.parseFloat(`${e.width}`)/e.ratio})}const $e=ue({directives:{pAspectRatio:be},components:{pButton:J,pInputRange:me,IconRotateLeft:xe,IconRotateRight:Re,IconZoomIn:ve,IconZoomOut:_e},props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},src:{type:[String,globalThis.File],default:void 0},ratio:{type:Number,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},imgWidth:{type:[String,Number],default:512},imgHeight:{type:[String,Number],default:512},imgClass:{type:[String,Array,Object],default:void 0},rounded:{type:Boolean,default:!1},noCrop:{type:Boolean,default:!1},noAutocrop:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue","change","result","load"],setup(e,{emit:s}){const n=fe(e),l=E(0),D=E(0),r=E(0),y=pe(1,.5,2),c=Pe(e),u=ze(e),F=qe(e),i=L(e,"rounded"),A=L(e,"src"),w=we(A),p=P("canvas"),I=P("parent"),m=P("target"),ee=T(()=>{const o=[];return e.noCrop&&o.push("cropper--no-crop"),e.rounded&&o.push("cropper--rounded"),o}),se=T(()=>({transform:`rotate(${r.value}deg) translate(${l.value}px, ${D.value}px) scale(${y.value})`})),te=T(()=>({aspectRatio:`${c.value}`,width:u.value?`${u.value}px`:"66.666667%"}));function z(){if(I.value&&m.value){const o=r.value%180===0?m.value.width:m.value.height,v=r.value%180===0?m.value.height:m.value.width;y.value=Math.min(I.value.clientWidth/o,I.value.clientHeight/v)}l.value=0,D.value=0}function U(){y.value+=.1}function j(){y.value-=.1}function ae(o){r.value=(Math.trunc(r.value/90)*90+o)%360,z()}function q(o,v){const k=Math.cos(r.value*Math.PI/180),R=Math.sin(r.value*Math.PI/180),S=o*k+v*R,x=v*k-o*R;l.value+=S,D.value+=x}function ne(){r.value=0,z()}function $(){if(I.value&&m.value&&p.value){const o=I.value.clientWidth*2/3,v=u.value??o,k=F.value??v/c.value,R=o>0&&v>o?v/o:1,S=Ne({canvas:p.value,image:m.value,width:v,height:k,x:l.value,y:D.value,angle:r.value,scale:y.value*R,rounded:e.rounded}),x=e.modelModifiers.base64?S:Ae(S);return n.value=x,s("change",x),s("result",x),S}}function oe(o){m.value&&m.value.focus(),o.deltaY>0?U():j()}function le(){s("load"),z(),!e.noCrop&&!e.noAutocrop&&$()}return Ee(m,{onpinch(o){y.value=o.scale,q(o.dx,o.dy)},onmove(o){q(o.dx,o.dy)}}),Te([A,u,F,c,i,l,D,y,r],()=>{!e.noCrop&&!e.noAutocrop&&$()},{debounce:500}),{classNames:ee,preview:w,imgStyle:se,maskStyle:te,scale:y,angle:r,reset:ne,onMouseWheel:oe,onImageLoaded:le,rotate:ae,zoomIn:U,zoomOut:j,move:q,crop:$,model:n,aspectRatio:c}}});const Me={class:"cropper__preview"},Be={ref:"canvas","data-testid":"cropper-canvas",class:"cropper__canvas"},He=["src","width","height"],Oe={class:"cropper__control"},Ue={class:"cropper__control-bar"};function je(e,s,n,l,D,r){const y=b("IconZoomOut"),c=b("p-button"),u=b("p-input-range"),F=b("IconZoomIn"),i=b("IconRotateLeft"),A=b("IconRotateRight"),w=ye("p-aspect-ratio");return H(),O("div",{"data-testid":"cropper",class:W(["cropper",e.classNames])},[t("div",Me,[t("canvas",Be,null,512),t("div",{ref:"parent","data-testid":"cropper-container",class:"cropper__image-container",onWheel:s[5]||(s[5]=V((...p)=>e.onMouseWheel&&e.onMouseWheel(...p),["prevent"]))},[t("img",{ref:"target","data-testid":"cropper-preview",alt:"cropper-preview",tabindex:"0",class:W(["cropper__image",e.imgClass]),src:e.preview,style:Y(e.imgStyle),width:e.imgWidth,height:e.imgHeight,onLoad:s[0]||(s[0]=(...p)=>e.onImageLoaded&&e.onImageLoaded(...p)),onKeydown:[s[1]||(s[1]=N(V(p=>e.move(0,-1),["prevent"]),["up"])),s[2]||(s[2]=N(V(p=>e.move(0,1),["prevent"]),["down"])),s[3]||(s[3]=N(V(p=>e.move(-1,0),["prevent"]),["left"])),s[4]||(s[4]=N(V(p=>e.move(1,0),["prevent"]),["right"]))]},null,46,He)],544),e.noCrop?he("",!0):Fe((H(),O("div",{key:0,"data-testid":"cropper-mask",class:"cropper__mask",style:Y(e.maskStyle)},null,4)),[[w,e.aspectRatio,void 0,{fixed:!0}]])]),t("div",Oe,[t("div",Ue,[a(c,{"data-testid":"cropper-zoom-out",size:"xs",variant:"link",icon:"",pill:"",onClick:s[6]||(s[6]=p=>e.zoomOut())},{default:h(()=>[a(y)]),_:1}),a(u,{modelValue:e.scale,"onUpdate:modelValue":s[7]||(s[7]=p=>e.scale=p),"data-testid":"cropper-zoom-slider",class:"cropper__slider",min:"0.5",max:"2",step:"0.1"},null,8,["modelValue"]),a(c,{"data-testid":"cropper-zoom-in",size:"xs",variant:"link",icon:"",pill:"",onClick:s[8]||(s[8]=p=>e.zoomIn())},{default:h(()=>[a(F)]),_:1}),a(c,{"data-testid":"cropper-rotate-left",size:"xs",variant:"link",icon:"",pill:"",onClick:s[9]||(s[9]=p=>e.rotate(-90))},{default:h(()=>[a(i)]),_:1}),a(c,{"data-testid":"cropper-rotate-right",size:"xs",variant:"link",icon:"",pill:"",onClick:s[10]||(s[10]=p=>e.rotate(90))},{default:h(()=>[a(A)]),_:1})]),a(c,{"data-testid":"cropper-reset",class:"flex-shrink-0",size:"xs",variant:"link",onClick:s[11]||(s[11]=p=>e.reset())},{default:h(()=>[g(" Reset ")]),_:1}),ge(e.$slots,"control",{scale:e.scale,angle:e.angle,crop:e.crop,zoomIn:e.zoomIn,zoomOut:e.zoomOut,rotate:e.rotate,reset:e.reset})])],2)}const C=De($e,[["render",je]]),f="/design-system/assets/sample-1.f0af279a.jpg",Le=_("",4),We=_("",4),Ye=_("",2),Ze=_("",3),Ge=_("",3),Je=_("",3),Ke=_("",2),Qe={class:"truncate"},Xe=t("h3",{id:"encode-to-base64",tabindex:"-1"},[g("Encode to base64 "),t("a",{class:"header-anchor",href:"#encode-to-base64","aria-hidden":"true"},"#")],-1),es=t("p",null,[g("You can add modifier "),t("code",null,"base64"),g(" to your "),t("code",null,"v-model"),g(", it's enforce result to "),t("a",{href:"https://en.wikipedia.org/wiki/Data_URI_scheme",target:"_blank",rel:"noreferrer"},"base64-dataURI"),g(".")],-1),ss=_("",2),ts={class:"truncate"},as=["src"],ns=t("h3",{id:"disabling-autocrop",tabindex:"-1"},[g("Disabling Autocrop "),t("a",{class:"header-anchor",href:"#disabling-autocrop","aria-hidden":"true"},"#")],-1),os=t("p",null,[g("By default, cropping process was ran every movement (drag, zoom, & rotate). It can be exhausting the resource on some device. You can disabled it using prop "),t("code",null,"no-autocrop"),g(". And to trigger the cropping, you can use "),t("code",null,"templateRef"),g(" on "),t("code",null,"<p-cropper>"),g(" component, and call "),t("code",null,".crop()"),g(" function.")],-1),ls=t("p",null,[t("strong",null,"result:")],-1),ps={class:"truncate"},rs=["src"],cs=_("",10),Ns=JSON.parse('{"title":"Cropper · Components","description":"Preview and crop image","frontmatter":{"title":"Cropper · Components","description":"Preview and crop image"},"headers":[{"level":2,"title":"Usage","slug":"usage","link":"#usage","children":[{"level":3,"title":"Simple Usage","slug":"simple-usage","link":"#simple-usage","children":[]}]},{"level":2,"title":"Crop Size","slug":"crop-size","link":"#crop-size","children":[{"level":3,"title":"Using width and height","slug":"using-width-and-height","link":"#using-width-and-height","children":[]},{"level":3,"title":"Using Ratio","slug":"using-ratio","link":"#using-ratio","children":[]}]},{"level":2,"title":"Rounded Crop","slug":"rounded-crop","link":"#rounded-crop","children":[]},{"level":2,"title":"Viewer Mode","slug":"viewer-mode","link":"#viewer-mode","children":[]},{"level":2,"title":"Binding v-model","slug":"binding-v-model","link":"#binding-v-model","children":[{"level":3,"title":"Encode to base64","slug":"encode-to-base64","link":"#encode-to-base64","children":[]},{"level":3,"title":"Disabling Autocrop","slug":"disabling-autocrop","link":"#disabling-autocrop","children":[]}]},{"level":2,"title":"API","slug":"api","link":"#api","children":[{"level":3,"title":"Props","slug":"props","link":"#props","children":[]},{"level":3,"title":"Slots","slug":"slots","link":"#slots","children":[]},{"level":3,"title":"Events","slug":"events","link":"#events","children":[]}]},{"level":2,"title":"See Also","slug":"see-also","link":"#see-also","children":[]}],"relativePath":"components/cropper/index.md"}'),is={name:"components/cropper/index.md"},Ps=Object.assign(is,{setup(e){const s=E(),n=E(),l=E(),D=P("cropper");function r(){D.value&&D.value.crop()}return(y,c)=>{const u=b("preview");return H(),O("div",null,[Le,a(u,{class:"flex-col"},{default:h(()=>[a(C,{src:d(f)},null,8,["src"])]),_:1}),We,a(u,null,{default:h(()=>[a(C,{src:d(f),width:"500",height:"200"},null,8,["src"])]),_:1}),Ye,a(u,null,{default:h(()=>[a(C,{src:d(f),ratio:16/9},null,8,["src"])]),_:1}),Ze,a(u,null,{default:h(()=>[a(C,{src:d(f),rounded:""},null,8,["src"])]),_:1}),Ge,a(u,null,{default:h(()=>[a(C,{src:d(f),"no-crop":""},null,8,["src"])]),_:1}),Je,a(u,null,{default:h(()=>[a(C,{src:d(f),modelValue:d(s),"onUpdate:modelValue":c[0]||(c[0]=F=>B(s)?s.value=F:null)},null,8,["src","modelValue"])]),_:1}),Ke,t("pre",Qe,[t("code",null,M(d(s)),1)]),Xe,es,a(u,{class:"flex-col"},{default:h(()=>[a(C,{src:d(f),modelValue:d(n),"onUpdate:modelValue":c[1]||(c[1]=F=>B(n)?n.value=F:null),modelModifiers:{base64:!0}},null,8,["src","modelValue"])]),_:1}),ss,t("pre",ts,[t("code",null,M(d(n)),1)]),t("img",{class:"mt-2 border",src:d(n)||d(G),alt:"Result Image"},null,8,as),ns,os,a(u,{class:"flex-col"},{default:h(()=>[a(C,{ref_key:"cropper",ref:D,src:d(f),modelValue:d(l),"onUpdate:modelValue":c[2]||(c[2]=F=>B(l)?l.value=F:null),modelModifiers:{base64:!0},"no-autocrop":""},null,8,["src","modelValue"]),a(J,{onClick:r},{default:h(()=>[g("Do Crop")]),_:1})]),_:1}),ls,t("pre",ps,[t("code",null,M(d(l)),1)]),t("img",{class:"mt-2 border",src:d(l)||d(G),alt:"Result Image"},null,8,rs),cs])}}});export{Ns as __pageData,Ps as default};
