const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/call-lusBi33f.rIlybnkn.js","assets/chunks/framework.CI6Dj8yt.js","assets/chunks/defu.BhsQtd2f.js"])))=>i.map(i=>d[i]);
import{V as S,p as y,h as W,q as N,s as I,c as h,j as r,k as a,G as d,w as m,al as B,F as C,o as g,a as n,n as F,a0 as j,t as x,e as G}from"./chunks/framework.CI6Dj8yt.js";import{_ as $}from"./chunks/Button.vue_vue_type_script_setup_true_lang.DOHgQt4I.js";/* empty css                                                      */import{_ as M}from"./chunks/PdfViewer.vue_vue_type_style_index_0_lang.BfwAur3P.js";import{_ as A}from"./chunks/Dropzone.vue_vue_type_script_setup_true_lang.DEB79uHN.js";/* empty css                                                        */import{_ as q,I as J}from"./chunks/32.D-E6w9E-.js";import{_ as E}from"./chunks/Heading.vue_vue_type_script_setup_true_lang.B_I4QezC.js";/* empty css                                                       */import{_ as K}from"./chunks/Caption.vue_vue_type_script_setup_true_lang.Th4M_igz.js";/* empty css                                                       */import{s as Y,h as Z}from"./chunks/index.CntWZ1a6.js";import{_ as H}from"./chunks/Banner.vue_vue_type_script_setup_true_lang.CaxF_UPh.js";/* empty css                                                      */import{u as O}from"./chunks/use-preview.BnfTYFot.js";import"./chunks/index.DvWHfs5K.js";import"./chunks/SpinnerRinggo.vue_vue_type_script_setup_true_lang.CAbNIu6d.js";import"./chunks/index.F8WrAqlk.js";import"./chunks/index.CcwQOeXo.js";import"./chunks/index.CQImwLBD.js";import"./chunks/use-idle.DOXDiBWV.js";import"./chunks/focus.DWrlVhv-.js";import"./chunks/commonjsHelpers.BosuxZz1.js";import"./chunks/index.DDyPugY2.js";import"./chunks/debounce.CE-8mXQa.js";import"./chunks/isObject.C3e4t58V.js";import"./chunks/baseGetTag.Cu32HCTk.js";import"./chunks/toNumber.Dcxq_36h.js";import"./chunks/isSymbol.BOom9x27.js";import"./chunks/isObjectLike.nLWjQ9zq.js";import"./chunks/toInteger.MhUOs5fD.js";import"./chunks/toString.CRwK6hIk.js";import"./chunks/isArray.Dxzbedgu.js";import"./chunks/noop.DX6rZLP_.js";import"./chunks/20.D4QJ6GT-.js";import"./chunks/20.4Lp1Y2VN.js";import"./chunks/Divider.vue_vue_type_script_setup_true_lang.BaPmHFQQ.js";/* empty css                                                       */import"./chunks/Select.vue_vue_type_style_index_0_lang.Cb_Q2HdC.js";import"./chunks/Dropdown.vue_vue_type_script_setup_true_lang.Cf8x-RQH.js";import"./chunks/Dropdown.vue_vue_type_style_index_0_lang.DNpByd8n.js";import"./chunks/use-focus.3sjawyk-.js";import"./chunks/floating-ui.dom.D8eMPWlJ.js";import"./chunks/index.CM3hlGhp.js";import"./chunks/DropdownHeader.vue_vue_type_style_index_0_lang.BGAfNnv6.js";import"./chunks/Subheading.vue_vue_type_style_index_0_lang.ByNcV1Hu.js";import"./chunks/Input.vue_vue_type_script_setup_true_lang.DZPhP39w.js";import"./chunks/20.CQtyJIeF.js";import"./chunks/accept.6g-OpsWF.js";/* empty css                                                     */import"./chunks/Text.vue_vue_type_style_index_0_lang.BbwkHw2M.js";import"./chunks/Label.vue_vue_type_script_setup_true_lang.CrjUOEra.js";import"./chunks/Dot.vue_vue_type_script_setup_true_lang.W2OHOb-D.js";/* empty css                                                   */import"./chunks/16.D7uNs2_7.js";/* empty css                                                     */import"./chunks/20.Bqg5dnPC.js";import"./chunks/20.DIEH4g8n.js";import"./chunks/IconCheckbox.bQRnRVkI.js";import"./chunks/SpinnerRing.vue_vue_type_script_setup_true_lang.FuCTXNtW.js";import"./chunks/value.DLcxroFL.js";import"./chunks/adapter.DZIn-_sx.js";import"./chunks/use-loading.BK4NNwD_.js";import"./chunks/defu.BhsQtd2f.js";import"./chunks/isNil.CHIgUVhi.js";import"./chunks/theme.C_hWnYle.js";import"./chunks/base64.CRVHLH2y.js";import"./chunks/use-singleton.P5iNpjxE.js";import"./chunks/queue.DLTVddtq.js";/* empty css                                                       */import"./chunks/20.BXrzkPip.js";import"./chunks/20.BYyB1xUG.js";import"./chunks/create-image.CkAV8b2h.js";import"./chunks/avatar.qWHUbXZ4.js";import"./chunks/color-hash.CY8Op1ql.js";const Q={useWorker:typeof window<"u"&&!!window.Worker};function X(){return Q}function T(l){let t=l;const s=new Set;return{get value(){return t},set value(i){t=i;for(const c of s)c(i)},change(i){return s.add(i),()=>{s.delete(i)}},toBe(i){return new Promise(c=>{const k=this.change(w=>{w===i&&(k(),c())})})}}}const L=T(),z=T(!1);async function ee(){if(z.value&&await z.toBe(!1),!L.value){z.value=!0;try{const{default:l}=await S(async()=>{const{default:t}=await import("./chunks/worker-DSU9kkV3.BInE4CAo.js");return{default:t}},[]);L.value=new l({name:"rpc-worker"})}finally{z.value=!1}}return L.value}async function te(l,t){const s=Date.now(),i=await ee();return await new Promise((c,k)=>{const w=u=>{u.data.id===s&&(b(),u.data.error?k(u.data.error):c(u.data.result))},f=u=>{b(),k(u)},b=()=>{i.removeEventListener("message",w),i.removeEventListener("error",f)};i.addEventListener("message",w),i.addEventListener("error",f),i.postMessage({id:s,name:l,args:t})})}async function oe(l,t){return(await S(async()=>{const{callRPC:s}=await import("./chunks/call-lusBi33f.rIlybnkn.js");return{callRPC:s}},__vite__mapDeps([0,1,2]))).callRPC(l,t)}async function re(l,t){return X().useWorker?te(l,t):oe(l,t)}const se=async(...l)=>await re("optimizePDF",l),ie={class:"flex w-full min-h-screen"},ae={key:0,class:"flex items-center justify-center w-full min-h-screen"},ne={class:"w-1/3 p-6 text-center"},le={class:"mb-4"},pe=["onClick"],de={class:"w-full border border-default dark:border-dark-default"},me={class:"flex p-2"},ue={class:"flex-grow"},fe={class:"w-full border dark:border-dark-default"},ce={class:"flex p-2"},ve={class:"flex-grow"},_e={key:0},Ut=JSON.parse('{"title":"","description":"","frontmatter":{"layout":false},"headers":[],"relativePath":"tools/pdf-optimizer.md","filePath":"tools/pdf-optimizer.md"}'),we={name:"tools/pdf-optimizer.md"},Wt=Object.assign(we,{setup(l){const t=y(),s=y(),i=y(),c=y(),k=O(t),w=O(s),f=y(),b=y(),u=W(()=>{if(t.value&&s.value)return Math.round((s.value.size-t.value.size)/t.value.size*100)});N(t,async p=>{if(p)try{Y();const e=performance.now(),o=await se(p,{noTransparency:!1}),v=t.value.name.replace(".pdf",".compressed.pdf");s.value=new File([o],v,{type:"application/pdf"}),b.value=(performance.now()-e)/1e3}finally{Z()}}),I(p=>{var v,_;const e=(v=i.value)==null?void 0:v.container,o=(_=c.value)==null?void 0:_.container;if(e&&o){const P=()=>V(e,o),R=()=>V(o,e);e.addEventListener("scroll",P,{passive:!0}),o.addEventListener("scroll",R,{passive:!0}),p(()=>{e.removeEventListener("scroll",P),o.removeEventListener("scroll",R)})}});function V(p,e){e.scrollLeft=p.scrollLeft,e.scrollTop=p.scrollTop}function D(p,e=2,o=1024){if(p===0)return"0 Bytes";const v=[`${p>1?"Bytes":"Byte"}`,"KB","MB","GB","TB","PB","EB","ZB","YB"],_=Math.floor(Math.log(p)/Math.log(o));return`${Number.parseFloat((p/Math.pow(o,_)).toFixed(e))} ${v[_]}`}function U(){t.value=void 0,s.value=void 0}return(p,e)=>(g(),h("div",null,[r("div",ie,[a(s)?(g(),h(C,{key:1},[r("div",de,[d(M,{scale:a(f),"onUpdate:scale":e[1]||(e[1]=o=>B(f)?f.value=o:null),ref_key:"inputViewer",ref:i,src:a(k),layout:"fit"},{header:m(()=>[r("div",me,[r("div",ue,[e[8]||(e[8]=n(" Original Size: ")),r("b",null,x(D(a(t).size)),1),e[9]||(e[9]=n("  "))]),d($,{size:"xs",onClick:U},{default:m(()=>e[10]||(e[10]=[n(" Close ")])),_:1})])]),_:1},8,["scale","src"])]),r("div",fe,[d(M,{scale:a(f),"onUpdate:scale":e[2]||(e[2]=o=>B(f)?f.value=o:null),ref_key:"outputViewer",ref:c,src:a(w),layout:"fit"},{header:m(()=>[r("div",ce,[r("div",ve,[e[11]||(e[11]=n(" Compressed Size: ")),r("b",null,x(D(a(s).size)),1),e[12]||(e[12]=n("  ")),r("span",{class:F(a(u)<0?"text-green-50":"text-red-50")},[a(u)>0?(g(),h("span",_e,"+")):G("",!0),n("("+x(a(u))+"%) ",1)],2),n(" Duration: "+x(a(b).toFixed(2))+"s ",1)]),d($,{href:a(w),download:a(s).name,color:"info",size:"xs"},{default:m(()=>e[13]||(e[13]=[n(" Download Compressed ")])),_:1},8,["href","download"])])]),_:1},8,["scale","src"])])],64)):(g(),h("div",ae,[r("div",ne,[r("div",le,[d(E,{element:"h3"},{default:m(()=>e[3]||(e[3]=[n(" PDF Optimizer ")])),_:1})]),d(A,{modelValue:a(t),"onUpdate:modelValue":e[0]||(e[0]=o=>B(t)?t.value=o:null),accept:"application/pdf"},{default:m(({isDragover:o,isHovered:v,model:_,browse:P})=>[r("div",{class:F(["flex flex-col items-center justify-center w-full p-6 space-y-3 border-2 border-dashed rounded aspect-video",[o?"bg-info dark:bg-dark-info border-info-emphasis dark:border-dark-info-emphasis":"bg-default dark:bg-dark-default border-default dark:border-dark-default"]])},[d(H,{variant:"danger",class:"text-start"},{default:m(()=>e[4]||(e[4]=[n(" Some content may be lost during compressing."),r("br",null,null,-1),r("strong",null,"Please take it at your own risk",-1)])),_:1}),d(q,{active:o||v},{default:m(()=>[d(J,{class:"w-20 h-20 my-5 fill-info-emphasis dark:fill-dark-info-emphasis"})]),_:2},1032,["active"]),d(E,{element:"h5"},{default:m(()=>e[5]||(e[5]=[n(" Upload Document ")])),_:1}),d(E,{element:"h6",class:"line-clamp-1"},{default:m(()=>[_?(g(),h(C,{key:1},[n(x(_.name),1)],64)):(g(),h(C,{key:0},[e[6]||(e[6]=n(" Drag your document here or click ")),r("a",{class:"text-info hover:underline",href:"#",onClick:j(P,["prevent"])},"Browse",8,pe)],64))]),_:2},1024)],2)]),_:1},8,["modelValue"]),d(K,{class:"my-4"},{default:m(()=>e[7]||(e[7]=[n(" Powered by: "),r("a",{class:"hover:underline decoration-dashed",href:"https://github.com/privy-open-source/ghoulscript",target:"_blank"},[r("b",null,"Ghoulscript")],-1)])),_:1})])]))])]))}});export{Ut as __pageData,Wt as default};
