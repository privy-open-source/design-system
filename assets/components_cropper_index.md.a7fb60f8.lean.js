import{p as Q}from"./chunks/Button.2deccdb1.js";import{t as k,d as le}from"./chunks/theme.bdd572ce.js";import{u as pe}from"./chunks/index.721d94a9.js";import{s as re,o as ce,a0 as ie,h as de,_ as L,x as P,p as x,G as t,c as E,m as ue,r as I,t as H,L as T,a8 as De,a5 as S,v as Y,W as G,a2 as V,a7 as ye,C as Fe,Q as o,B as F,y as m,q as he,F as K,z as U,u,X as C,i as j}from"./chunks/framework.f14560cd.js";import{t as J}from"./chunks/throttle.77eff498.js";import{p as me}from"./chunks/InputRange.643140e9.js";import{I as ge,a as _e}from"./chunks/20.1f42b11e.js";import{c as ve}from"./chunks/canvas.b003a521.js";import{u as Ce}from"./chunks/index.7a96623d.js";import{f as fe}from"./chunks/base64.041d95b4.js";import{p as Ae}from"./chunks/index.ae3048bb.js";import{u as be}from"./chunks/index.9f92ed68.js";import"./chunks/index.a3ecab28.js";import"./chunks/Button.vue_vue_type_style_index_0_lang.4ed993c7.js";import"./chunks/debounce.425ad733.js";import"./chunks/toNumber.09abc7f0.js";import"./chunks/isSymbol.4326927f.js";import"./chunks/isObjectLike.53b0037d.js";import"./chunks/defu.573334b8.js";import"./chunks/load-image.265b152a.js";import"./chunks/create-image.219ca7ba.js";import"./chunks/avatar.bd58a373.js";import"./chunks/color-hash.af77277d.js";function we(e,s){const n=re();ce(async()=>{if(e.value){const{default:p}=await ie(()=>import("./chunks/interact.min.3d1d0b73.js").then(d=>d.i),["assets/chunks/interact.min.3d1d0b73.js","assets/chunks/commonjsHelpers.de833af9.js"]),i=J(s.onmove,1e3/120),l=J(s.onpinch,1e3/120);n.value=p(e.value).styleCursor(!0).gesturable({inertia:!0,onstart:s.onstart,onmove:l,onend:l,modifiers:[p.modifiers.restrict({restriction:"parent",endOnly:!0})]}).draggable({inertia:!0,onstart:s.onstart,onmove:i,onend:i,modifiers:[p.modifiers.restrict({restriction:"parent",endOnly:!0})]})}}),de(async()=>{var p;(p=n.value)==null||p.unset()})}const Te={},qe={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},Ee=t("path",{fill:"currentColor",d:"M13.5 15.998a.603.603 0 0 0-.603-.603h-.796V9.002a.603.603 0 0 0-.603-.603H5.105v-.796a.603.603 0 0 0-1.206 0v.796h-.796a.603.603 0 0 0 0 1.206h.796v6.393c0 .333.27.603.603.603h6.393v.796a.603.603 0 0 0 1.206 0v-.796h.796c.333 0 .603-.27.603-.603Zm-2.605-.603h-5.79v-5.79h5.79v5.79ZM11.866 2.16a.592.592 0 0 0-.852.045L9.655 3.757a.634.634 0 0 0 0 .83l1.359 1.552a.592.592 0 0 0 .852.046.633.633 0 0 0 .045-.876l-.451-.516h3.172c.917 0 1.66.764 1.66 1.707v3.88c0 .342.27.62.604.62a.612.612 0 0 0 .604-.62V6.5c0-1.628-1.284-2.948-2.868-2.948H11.46l.451-.516a.633.633 0 0 0-.045-.877Z"},null,-1),Ie=[Ee];function Se(e,s){return P(),x("svg",qe,Ie)}const Pe=L(Te,[["render",Se]]),xe={},Ve={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",class:"persona-icon",viewBox:"0 0 20 20"},ke=t("path",{fill:"currentColor",d:"M6.5 15.998c0-.333.27-.603.603-.603h.796V9.002c0-.333.27-.603.603-.603h6.393v-.796a.603.603 0 0 1 1.206 0v.796h.796a.603.603 0 0 1 0 1.206h-.796v6.393c0 .333-.27.603-.603.603H9.105v.796a.603.603 0 0 1-1.206 0v-.796h-.796a.603.603 0 0 1-.603-.603Zm2.605-.603h5.79v-5.79h-5.79v5.79ZM8.134 2.16a.592.592 0 0 1 .852.045l1.359 1.552a.634.634 0 0 1 0 .83L8.986 6.14a.592.592 0 0 1-.852.046.633.633 0 0 1-.045-.876l.451-.516H5.368c-.917 0-1.66.764-1.66 1.707v3.88c0 .342-.27.62-.604.62a.612.612 0 0 1-.604-.62V6.5c0-1.628 1.284-2.948 2.868-2.948H8.54l-.451-.516a.633.633 0 0 1 .045-.877Z"},null,-1),Re=[ke];function $e(e,s){return P(),x("svg",Ve,Re)}const Ne=L(xe,[["render",$e]]);function Me(e){var c;const{width:s,height:n,image:p,scale:i,angle:l,x:d,y,rounded:v}=e,D=(c=e.canvas)!=null?c:ve(s,n),a=D.getContext("2d"),h=p.width*i,q=p.height*i;if(D.width=s,D.height=n,a.clearRect(0,0,s,n),a.translate(s/2,n/2),a.rotate(l*Math.PI/180),a.translate(s/-2,n/-2),a.drawImage(p,(s-h)/2+d,(n-q)/2+y,h,q),v){const g=Math.min(s/2,n/2);a.globalCompositeOperation="destination-in",a.beginPath(),a.moveTo(g,0),a.arcTo(s,0,s,n,g),a.arcTo(s,n,0,n,g),a.arcTo(0,n,0,0,g),a.arcTo(0,0,s,0,g),a.closePath(),a.fill()}return D.toDataURL()}function ze(e,s=1){return E(()=>{var n;return e.width&&e.height?Number.parseFloat(`${e.width}`)/Number.parseFloat(`${e.height}`):(n=e.ratio)!=null?n:s})}function Be(e){return E(()=>{if(e.width)return Number.parseFloat(`${e.width}`);if(e.height&&e.ratio)return Number.parseFloat(`${e.height}`)*e.ratio})}function Oe(e){return E(()=>{if(e.height)return Number.parseFloat(`${e.height}`);if(e.width&&e.ratio)return Number.parseFloat(`${e.width}`)/e.ratio})}const Ue=ue({directives:{pAspectRatio:Ae},components:{pButton:Q,pInputRange:me,IconRotateLeft:Pe,IconRotateRight:Ne,IconZoomIn:ge,IconZoomOut:_e},props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},src:{type:[String,globalThis.File],default:void 0},ratio:{type:Number,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},imgWidth:{type:[String,Number],default:512},imgHeight:{type:[String,Number],default:512},imgClass:{type:[String,Array,Object],default:void 0},rounded:{type:Boolean,default:!1},noCrop:{type:Boolean,default:!1},noAutocrop:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue","change","result","load"],setup(e,{emit:s}){const n=Ce(e),p=I(0),i=I(0),l=I(0),d=pe(1,.5,2),y=ze(e),v=Be(e),D=Oe(e),a=H(e,"rounded"),h=H(e,"src"),q=be(h),c=k("canvas"),g=k("parent"),_=k("target"),X=E(()=>{const r=[];return e.noCrop&&r.push("cropper--no-crop"),e.rounded&&r.push("cropper--rounded"),r}),ee=E(()=>({transform:`rotate(${l.value}deg) translate(${p.value}px, ${i.value}px) scale(${d.value})`})),se=E(()=>({aspectRatio:`${y.value}`,width:v.value?`${v.value}px`:"66.666667%"}));function R(){if(g.value&&_.value){const r=l.value%180===0?_.value.width:_.value.height,A=l.value%180===0?_.value.height:_.value.width;d.value=Math.min(g.value.clientWidth/r,g.value.clientHeight/A)}p.value=0,i.value=0}function W(){d.value+=.1}function Z(){d.value-=.1}function te(r){l.value=(Math.trunc(l.value/90)*90+r)%360,R()}function $(r,A){const b=Math.cos(l.value*Math.PI/180),w=Math.sin(l.value*Math.PI/180),M=r*b+A*w,z=A*b-r*w;p.value+=M,i.value+=z}function ae(){l.value=0,R()}function N(){var r,A;if(g.value&&_.value&&c.value){const b=g.value.clientWidth*2/3,w=(r=v.value)!=null?r:b,M=(A=D.value)!=null?A:w/y.value,z=b>0&&w>b?w/b:1,B=Me({canvas:c.value,image:_.value,width:w,height:M,x:p.value,y:i.value,angle:l.value,scale:d.value*z,rounded:e.rounded}),O=e.modelModifiers.base64?B:fe(B);return n.value=O,s("change",O),s("result",O),B}}function oe(r){_.value&&_.value.focus(),r.deltaY>0?W():Z()}function ne(){s("load"),R(),!e.noCrop&&!e.noAutocrop&&N()}return we(_,{onpinch(r){d.value=r.scale,$(r.dx,r.dy)},onmove(r){$(r.dx,r.dy)}}),le([h,v,D,y,a,p,i,d,l],()=>{!e.noCrop&&!e.noAutocrop&&N()},{debounce:500}),{classNames:X,preview:q,imgStyle:ee,maskStyle:se,scale:d,angle:l,reset:ae,onMouseWheel:oe,onImageLoaded:ne,rotate:te,zoomIn:W,zoomOut:Z,move:$,crop:N,model:n,aspectRatio:y}}});const je={class:"cropper__preview"},Le={ref:"canvas","data-testid":"cropper-canvas",class:"cropper__canvas"},We=["src","width","height"],Ze={class:"cropper__control"},He={class:"cropper__control-bar"};function Ye(e,s,n,p,i,l){const d=T("IconZoomOut"),y=T("p-button"),v=T("p-input-range"),D=T("IconZoomIn"),a=T("IconRotateLeft"),h=T("IconRotateRight"),q=De("p-aspect-ratio");return P(),x("div",{"data-testid":"cropper",class:Y(["cropper",e.classNames])},[t("div",je,[t("canvas",Le,null,512),t("div",{ref:"parent","data-testid":"cropper-container",class:"cropper__image-container",onWheel:s[5]||(s[5]=S((...c)=>e.onMouseWheel&&e.onMouseWheel(...c),["prevent"]))},[t("img",{ref:"target","data-testid":"cropper-preview",alt:"cropper-preview",tabindex:"0",class:Y(["cropper__image",e.imgClass]),src:e.preview,style:G(e.imgStyle),width:e.imgWidth,height:e.imgHeight,onLoad:s[0]||(s[0]=(...c)=>e.onImageLoaded&&e.onImageLoaded(...c)),onKeydown:[s[1]||(s[1]=V(S(c=>e.move(0,-1),["prevent"]),["up"])),s[2]||(s[2]=V(S(c=>e.move(0,1),["prevent"]),["down"])),s[3]||(s[3]=V(S(c=>e.move(-1,0),["prevent"]),["left"])),s[4]||(s[4]=V(S(c=>e.move(1,0),["prevent"]),["right"]))]},null,46,We)],544),e.noCrop?Fe("",!0):ye((P(),x("div",{key:0,"data-testid":"cropper-mask",class:"cropper__mask",style:G(e.maskStyle)},null,4)),[[q,e.aspectRatio,void 0,{fixed:!0}]])]),t("div",Ze,[t("div",He,[o(y,{"data-testid":"cropper-zoom-out",size:"xs",variant:"link",icon:"",pill:"",onClick:s[6]||(s[6]=c=>e.zoomOut())},{default:F(()=>[o(d)]),_:1}),o(v,{modelValue:e.scale,"onUpdate:modelValue":s[7]||(s[7]=c=>e.scale=c),"data-testid":"cropper-zoom-slider",class:"cropper__slider",min:"0.5",max:"2",step:"0.1"},null,8,["modelValue"]),o(y,{"data-testid":"cropper-zoom-in",size:"xs",variant:"link",icon:"",pill:"",onClick:s[8]||(s[8]=c=>e.zoomIn())},{default:F(()=>[o(D)]),_:1}),o(y,{"data-testid":"cropper-rotate-left",size:"xs",variant:"link",icon:"",pill:"",onClick:s[9]||(s[9]=c=>e.rotate(-90))},{default:F(()=>[o(a)]),_:1}),o(y,{"data-testid":"cropper-rotate-right",size:"xs",variant:"link",icon:"",pill:"",onClick:s[10]||(s[10]=c=>e.rotate(90))},{default:F(()=>[o(h)]),_:1})]),o(y,{"data-testid":"cropper-reset",class:"flex-shrink-0",size:"xs",variant:"link",onClick:s[11]||(s[11]=c=>e.reset())},{default:F(()=>[m(" Reset ")]),_:1}),he(e.$slots,"control",{scale:e.scale,angle:e.angle,crop:e.crop,zoomIn:e.zoomIn,zoomOut:e.zoomOut,rotate:e.rotate,reset:e.reset})])],2)}const f=L(Ue,[["render",Ye]]),Ge=C("",4),Ke=C("",4),Je=C("",2),Qe=C("",3),Xe=C("",3),es=C("",3),ss=C("",2),ts={class:"truncate"},as=t("h3",{id:"encode-to-base64",tabindex:"-1"},[m("Encode to base64 "),t("a",{class:"header-anchor",href:"#encode-to-base64","aria-label":'Permalink to "Encode to base64"'},"​")],-1),os=t("p",null,[m("You can add modifier "),t("code",null,"base64"),m(" to your "),t("code",null,"v-model"),m(", it's enforce result to "),t("a",{href:"https://en.wikipedia.org/wiki/Data_URI_scheme",target:"_blank",rel:"noreferrer"},"base64-dataURI"),m(".")],-1),ns=C("",2),ls={class:"truncate"},ps=["src"],rs=t("h3",{id:"disabling-autocrop",tabindex:"-1"},[m("Disabling Autocrop "),t("a",{class:"header-anchor",href:"#disabling-autocrop","aria-label":'Permalink to "Disabling Autocrop"'},"​")],-1),cs=t("p",null,[m("By default, cropping process was ran every movement (drag, zoom, & rotate). It can be exhausting the resource on some device. You can disabled it using prop "),t("code",null,"no-autocrop"),m(". And to trigger the cropping, you can use "),t("code",null,"templateRef"),m(" on "),t("code",null,"<p-cropper>"),m(" component, and call "),t("code",null,".crop()"),m(" function.")],-1),is={class:"mt-4"},ds=t("p",null,[t("strong",null,"result:")],-1),us={class:"truncate"},Ds=["src"],ys=C("",10),zs=JSON.parse('{"title":"Cropper · Components","description":"Preview and crop image","frontmatter":{"title":"Cropper · Components","description":"Preview and crop image"},"headers":[],"relativePath":"components/cropper/index.md","filePath":"components/cropper/index.md"}'),Fs={name:"components/cropper/index.md"},Bs=Object.assign(Fs,{setup(e){const s=K("/assets/images/img-sample-crop.jpg"),n=K("/assets/images/empty-img.png"),p=I(),i=I(),l=I(),d=k("cropper");function y(){d.value&&d.value.crop()}return(v,D)=>{const a=T("preview");return P(),x("div",null,[Ge,o(a,{class:"flex-col"},{default:F(()=>[o(f,{src:u(s)},null,8,["src"])]),_:1}),Ke,o(a,null,{default:F(()=>[o(f,{src:u(s),width:"500",height:"200"},null,8,["src"])]),_:1}),Je,o(a,null,{default:F(()=>[o(f,{src:u(s),ratio:16/9},null,8,["src"])]),_:1}),Qe,o(a,null,{default:F(()=>[o(f,{src:u(s),rounded:""},null,8,["src"])]),_:1}),Xe,o(a,null,{default:F(()=>[o(f,{src:u(s),"no-crop":""},null,8,["src"])]),_:1}),es,o(a,null,{default:F(()=>[o(f,{src:u(s),modelValue:u(p),"onUpdate:modelValue":D[0]||(D[0]=h=>j(p)?p.value=h:null)},null,8,["src","modelValue"])]),_:1}),ss,t("pre",ts,[t("code",null,U(u(p)),1)]),as,os,o(a,{class:"flex-col"},{default:F(()=>[o(f,{src:u(s),modelValue:u(i),"onUpdate:modelValue":D[1]||(D[1]=h=>j(i)?i.value=h:null),modelModifiers:{base64:!0}},null,8,["src","modelValue"])]),_:1}),ns,t("pre",ls,[t("code",null,U(u(i)),1)]),t("img",{class:"mt-2 border",src:u(i)||u(n),alt:"Result Image"},null,8,ps),rs,cs,o(a,{class:"flex-col"},{default:F(()=>[o(f,{ref_key:"cropper",ref:d,src:u(s),modelValue:u(l),"onUpdate:modelValue":D[2]||(D[2]=h=>j(l)?l.value=h:null),modelModifiers:{base64:!0},"no-autocrop":""},null,8,["src","modelValue"]),t("div",is,[o(Q,{onClick:y},{default:F(()=>[m("Do Crop")]),_:1})])]),_:1}),ds,t("pre",us,[t("code",null,U(u(l)),1)]),t("img",{class:"mt-2 border",src:u(l)||u(n),alt:"Result Image"},null,8,Ds),ys])}}});export{zs as __pageData,Bs as default};
