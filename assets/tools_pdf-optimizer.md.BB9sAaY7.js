const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/call-lusBi33f.D26c7nDx.js","assets/chunks/framework.Ae0H8jK5.js","assets/chunks/defu.BhsQtd2f.js"])))=>i.map(i=>d[i]);
import{X as S,r as k,l as W,v as I,x as N,c as h,m as r,p as a,I as m,w as d,a8 as B,F as C,o as g,b as n,n as F,a2 as j,f as x,h as A}from"./chunks/framework.Ae0H8jK5.js";import{_ as $}from"./chunks/Button.vue_vue_type_script_setup_true_lang.ISBzTgbu.js";/* empty css                                                      */import{_ as M}from"./chunks/PdfViewer.vue_vue_type_style_index_0_lang.XKCu60Vt.js";import{_ as G}from"./chunks/Dropzone.vue_vue_type_script_setup_true_lang.BK3T9Kkk.js";/* empty css                                                        */import{_ as J,I as K}from"./chunks/32.Cjdk4zL9.js";import{_ as E}from"./chunks/Heading.vue_vue_type_script_setup_true_lang.2d9qUuwT.js";/* empty css                                                       */import{_ as X}from"./chunks/Caption.vue_vue_type_script_setup_true_lang.DTFNJHgn.js";/* empty css                                                       */import{s as Y,h as Z}from"./chunks/index.sXYoCiJE.js";import{_ as q}from"./chunks/Banner.vue_vue_type_script_setup_true_lang.Bw7S3pWI.js";/* empty css                                                      */import{u as O}from"./chunks/use-preview.BR9slDJy.js";import"./chunks/index.DvWHfs5K.js";import"./chunks/SpinnerRinggo.vue_vue_type_script_setup_true_lang.BL8kVc-G.js";import"./chunks/index.CFgIHItP.js";import"./chunks/index.C86NPbNV.js";import"./chunks/index.BXdnohvQ.js";import"./chunks/use-idle.saCRdrsb.js";import"./chunks/focus.DWrlVhv-.js";import"./chunks/commonjsHelpers.BosuxZz1.js";import"./chunks/index.DVVjvVJm.js";import"./chunks/debounce.CE-8mXQa.js";import"./chunks/isObject.C3e4t58V.js";import"./chunks/baseGetTag.Cu32HCTk.js";import"./chunks/toNumber.Dcxq_36h.js";import"./chunks/isSymbol.BOom9x27.js";import"./chunks/isObjectLike.nLWjQ9zq.js";import"./chunks/toInteger.MhUOs5fD.js";import"./chunks/toString.CRwK6hIk.js";import"./chunks/isArray.Dxzbedgu.js";import"./chunks/noop.DX6rZLP_.js";import"./chunks/20.BiQO2OxO.js";import"./chunks/20.DBfed_MT.js";import"./chunks/Divider.vue_vue_type_script_setup_true_lang.C_DjOPN2.js";/* empty css                                                       */import"./chunks/Select.vue_vue_type_style_index_0_lang.DMDRdS7i.js";import"./chunks/Dropdown.vue_vue_type_script_setup_true_lang.Dort0aCp.js";import"./chunks/Dropdown.vue_vue_type_style_index_0_lang.CAD6iCb8.js";import"./chunks/use-focus.3sjawyk-.js";import"./chunks/floating-ui.dom.D8eMPWlJ.js";import"./chunks/index.CD5JWynm.js";import"./chunks/DropdownHeader.vue_vue_type_style_index_0_lang.DNKoGyq9.js";import"./chunks/Subheading.vue_vue_type_style_index_0_lang.DKeMSs9V.js";import"./chunks/Input.vue_vue_type_script_setup_true_lang.VaPGHfo8.js";import"./chunks/20.QUaDM69Z.js";import"./chunks/accept.6g-OpsWF.js";/* empty css                                                     */import"./chunks/Text.vue_vue_type_style_index_0_lang.fJUaIgxm.js";import"./chunks/Label.vue_vue_type_script_setup_true_lang.DxTBtjJV.js";import"./chunks/Dot.vue_vue_type_script_setup_true_lang.BupZg1DN.js";/* empty css                                                   */import"./chunks/16.BvV6YgcX.js";/* empty css                                                     */import"./chunks/20.wrPQslVa.js";import"./chunks/20.0ZnVk26L.js";import"./chunks/IconCheckbox.K_U-Y4KD.js";import"./chunks/SpinnerRing.vue_vue_type_script_setup_true_lang.BTwTH-JH.js";import"./chunks/value.DLcxroFL.js";import"./chunks/adapter.DsdEDTzR.js";import"./chunks/use-loading.CEYATiXG.js";import"./chunks/defu.BhsQtd2f.js";import"./chunks/isNil.CHIgUVhi.js";import"./chunks/baseIteratee.eh5QV-tM.js";import"./chunks/Uint8Array.DGxCkLQj.js";import"./chunks/Set.BDAeA5md.js";import"./chunks/setToArray.DK7eKNuA.js";import"./chunks/baseUniq.DqGnNyzl.js";import"./chunks/baseFindIndex.D7XfJLKM.js";import"./chunks/theme.Cwq3e90z.js";import"./chunks/base64.CRVHLH2y.js";import"./chunks/use-singleton.MAn_zPei.js";import"./chunks/queue.DLTVddtq.js";/* empty css                                                       */import"./chunks/20.BBlRsTug.js";import"./chunks/20.CTcy0BhG.js";import"./chunks/create-image.CkAV8b2h.js";import"./chunks/avatar.qWHUbXZ4.js";import"./chunks/color-hash.CY8Op1ql.js";const H={useWorker:typeof window<"u"&&!!window.Worker};function Q(){return H}function T(l){let t=l;const i=new Set;return{get value(){return t},set value(s){t=s;for(const c of i)c(s)},change(s){return i.add(s),()=>{i.delete(s)}},toBe(s){return new Promise(c=>{const y=this.change(w=>{w===s&&(y(),c())})})}}}const L=T(),z=T(!1);async function ee(){if(z.value&&await z.toBe(!1),!L.value){z.value=!0;try{const{default:l}=await S(async()=>{const{default:t}=await import("./chunks/worker-DSU9kkV3.BInE4CAo.js");return{default:t}},[]);L.value=new l({name:"rpc-worker"})}finally{z.value=!1}}return L.value}async function te(l,t){const i=Date.now(),s=await ee();return await new Promise((c,y)=>{const w=u=>{u.data.id===i&&(b(),u.data.error?y(u.data.error):c(u.data.result))},f=u=>{b(),y(u)},b=()=>{s.removeEventListener("message",w),s.removeEventListener("error",f)};s.addEventListener("message",w),s.addEventListener("error",f),s.postMessage({id:i,name:l,args:t})})}async function oe(l,t){return(await S(async()=>{const{callRPC:i}=await import("./chunks/call-lusBi33f.D26c7nDx.js");return{callRPC:i}},__vite__mapDeps([0,1,2]))).callRPC(l,t)}async function re(l,t){return Q().useWorker?te(l,t):oe(l,t)}const ie=async(...l)=>await re("optimizePDF",l),se={class:"flex w-full min-h-screen"},ae={key:0,class:"flex items-center justify-center w-full min-h-screen"},ne={class:"w-1/3 p-6 text-center"},le={class:"mb-4"},pe=["onClick"],me={class:"w-full border border-default dark:border-dark-default"},de={class:"flex p-2"},ue={class:"flex-grow"},fe={class:"w-full border dark:border-dark-default"},ce={class:"flex p-2"},ve={class:"flex-grow"},_e={key:0},Gt=JSON.parse('{"title":"","description":"","frontmatter":{"layout":false},"headers":[],"relativePath":"tools/pdf-optimizer.md","filePath":"tools/pdf-optimizer.md"}'),we={name:"tools/pdf-optimizer.md"},Jt=Object.assign(we,{setup(l){const t=k(),i=k(),s=k(),c=k(),y=O(t),w=O(i),f=k(),b=k(),u=W(()=>{if(t.value&&i.value)return Math.round((i.value.size-t.value.size)/t.value.size*100)});I(t,async p=>{if(p)try{Y();const e=performance.now(),o=await ie(p,{noTransparency:!1}),v=t.value.name.replace(".pdf",".compressed.pdf");i.value=new File([o],v,{type:"application/pdf"}),b.value=(performance.now()-e)/1e3}finally{Z()}}),N(p=>{var v,_;const e=(v=s.value)==null?void 0:v.container,o=(_=c.value)==null?void 0:_.container;if(e&&o){const P=()=>V(e,o),R=()=>V(o,e);e.addEventListener("scroll",P,{passive:!0}),o.addEventListener("scroll",R,{passive:!0}),p(()=>{e.removeEventListener("scroll",P),o.removeEventListener("scroll",R)})}});function V(p,e){e.scrollLeft=p.scrollLeft,e.scrollTop=p.scrollTop}function D(p,e=2,o=1024){if(p===0)return"0 Bytes";const v=[`${p>1?"Bytes":"Byte"}`,"KB","MB","GB","TB","PB","EB","ZB","YB"],_=Math.floor(Math.log(p)/Math.log(o));return`${Number.parseFloat((p/Math.pow(o,_)).toFixed(e))} ${v[_]}`}function U(){t.value=void 0,i.value=void 0}return(p,e)=>(g(),h("div",null,[r("div",se,[a(i)?(g(),h(C,{key:1},[r("div",me,[m(M,{scale:a(f),"onUpdate:scale":e[1]||(e[1]=o=>B(f)?f.value=o:null),ref_key:"inputViewer",ref:s,src:a(y),layout:"fit"},{header:d(()=>[r("div",de,[r("div",ue,[e[8]||(e[8]=n(" Original Size: ")),r("b",null,x(D(a(t).size)),1),e[9]||(e[9]=n("  "))]),m($,{size:"xs",onClick:U},{default:d(()=>e[10]||(e[10]=[n(" Close ")])),_:1})])]),_:1},8,["scale","src"])]),r("div",fe,[m(M,{scale:a(f),"onUpdate:scale":e[2]||(e[2]=o=>B(f)?f.value=o:null),ref_key:"outputViewer",ref:c,src:a(w),layout:"fit"},{header:d(()=>[r("div",ce,[r("div",ve,[e[11]||(e[11]=n(" Compressed Size: ")),r("b",null,x(D(a(i).size)),1),e[12]||(e[12]=n("  ")),r("span",{class:F(a(u)<0?"text-green-50":"text-red-50")},[a(u)>0?(g(),h("span",_e,"+")):A("",!0),n("("+x(a(u))+"%) ",1)],2),n(" Duration: "+x(a(b).toFixed(2))+"s ",1)]),m($,{href:a(w),download:a(i).name,color:"info",size:"xs"},{default:d(()=>e[13]||(e[13]=[n(" Download Compressed ")])),_:1},8,["href","download"])])]),_:1},8,["scale","src"])])],64)):(g(),h("div",ae,[r("div",ne,[r("div",le,[m(E,{element:"h3"},{default:d(()=>e[3]||(e[3]=[n(" PDF Optimizer ")])),_:1})]),m(G,{modelValue:a(t),"onUpdate:modelValue":e[0]||(e[0]=o=>B(t)?t.value=o:null),accept:"application/pdf"},{default:d(({isDragover:o,isHovered:v,model:_,browse:P})=>[r("div",{class:F(["flex flex-col items-center justify-center w-full p-6 space-y-3 border-2 border-dashed rounded aspect-video",[o?"bg-info dark:bg-dark-info border-info-emphasis dark:border-dark-info-emphasis":"bg-default dark:bg-dark-default border-default dark:border-dark-default"]])},[m(q,{variant:"danger",class:"text-start"},{default:d(()=>e[4]||(e[4]=[n(" Some content may be lost during compressing."),r("br",null,null,-1),r("strong",null,"Please take it at your own risk",-1)])),_:1}),m(J,{active:o||v},{default:d(()=>[m(K,{class:"w-20 h-20 my-5 fill-info-emphasis dark:fill-dark-info-emphasis"})]),_:2},1032,["active"]),m(E,{element:"h5"},{default:d(()=>e[5]||(e[5]=[n(" Upload Document ")])),_:1}),m(E,{element:"h6",class:"line-clamp-1"},{default:d(()=>[_?(g(),h(C,{key:1},[n(x(_.name),1)],64)):(g(),h(C,{key:0},[e[6]||(e[6]=n(" Drag your document here or click ")),r("a",{class:"text-info hover:underline",href:"#",onClick:j(P,["prevent"])},"Browse",8,pe)],64))]),_:2},1024)],2)]),_:1},8,["modelValue"]),m(X,{class:"my-4"},{default:d(()=>e[7]||(e[7]=[n(" Powered by: "),r("a",{class:"hover:underline decoration-dashed",href:"https://github.com/privy-open-source/ghoulscript",target:"_blank"},[r("b",null,"Ghoulscript")],-1)])),_:1})])]))])]))}});export{Gt as __pageData,Jt as default};
