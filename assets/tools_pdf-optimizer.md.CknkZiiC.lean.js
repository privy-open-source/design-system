const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/call-lusBi33f.BPkT_al8.js","assets/chunks/framework.BjhmxGx1.js","assets/chunks/defu.CMw4_7D2.js"])))=>i.map(i=>d[i]);
import{Z as S,r as y,l as W,y as N,z as I,c as k,m as r,p as a,K as p,w as m,aa as B,G as C,o as g,b as n,n as $,a4 as G,f as x,h as j}from"./chunks/framework.BjhmxGx1.js";import{_ as F}from"./chunks/Button.vue_vue_type_script_setup_true_lang.BnFchjFq.js";/* empty css                                                      */import{_ as M}from"./chunks/PdfViewer.vue_vue_type_style_index_0_lang.DEzB2bt9.js";import{_ as A}from"./chunks/Dropzone.vue_vue_type_script_setup_true_lang.gQsG8_Tp.js";/* empty css                                                        */import{_ as K,I as Z}from"./chunks/32.BqAks9zD.js";import{_ as E}from"./chunks/Heading.vue_vue_type_script_setup_true_lang.CdMF7zxP.js";/* empty css                                                       */import{_ as J}from"./chunks/Caption.vue_vue_type_script_setup_true_lang.FkDHkM1F.js";/* empty css                                                       */import{s as Y,h as q}from"./chunks/index.Bn6516P0.js";import{_ as H}from"./chunks/Banner.vue_vue_type_script_setup_true_lang.6AQX7fr_.js";/* empty css                                                      */import{u as O}from"./chunks/use-preview.CFpKnRsq.js";import"./chunks/index.DvWHfs5K.js";import"./chunks/SpinnerRinggo.vue_vue_type_script_setup_true_lang.B6xZx5vQ.js";import"./chunks/index.DwUX65lQ.js";import"./chunks/index.C6_LL6lH.js";import"./chunks/index.CydGP8Vq.js";import"./chunks/use-idle.Dmyge5VX.js";import"./chunks/focus.DWrlVhv-.js";import"./chunks/commonjsHelpers.BosuxZz1.js";import"./chunks/index.BONkLgP_.js";import"./chunks/debounce.CE-8mXQa.js";import"./chunks/isObject.C3e4t58V.js";import"./chunks/baseGetTag.Cu32HCTk.js";import"./chunks/toNumber.Dcxq_36h.js";import"./chunks/isSymbol.BOom9x27.js";import"./chunks/isObjectLike.nLWjQ9zq.js";import"./chunks/toInteger.NZnbAWM7.js";import"./chunks/toString.CQAYsbsy.js";import"./chunks/isArray.Dxzbedgu.js";import"./chunks/noop.DX6rZLP_.js";import"./chunks/20.mWHpD-uY.js";import"./chunks/20.Uozo7NRP.js";import"./chunks/Divider.vue_vue_type_script_setup_true_lang.DCkUVtZ2.js";/* empty css                                                       */import"./chunks/Select.vue_vue_type_style_index_0_lang.LLAGABJf.js";import"./chunks/Dropdown.vue_vue_type_script_setup_true_lang.Dy4Xlw9u.js";import"./chunks/Dropdown.vue_vue_type_style_index_0_lang.DzR9VC0m.js";import"./chunks/use-focus.BMEofKAE.js";import"./chunks/floating-ui.dom.Bv9LQ7l_.js";import"./chunks/index.BUKJqaQF.js";import"./chunks/DropdownHeader.vue_vue_type_style_index_0_lang.h0FedB8L.js";import"./chunks/Subheading.vue_vue_type_style_index_0_lang.BIdqFKdC.js";import"./chunks/Input.vue_vue_type_script_setup_true_lang.BvKDDQha.js";import"./chunks/20.CDgdKPOT.js";import"./chunks/accept.6g-OpsWF.js";/* empty css                                                     */import"./chunks/Text.vue_vue_type_style_index_0_lang.CAFYSTvt.js";import"./chunks/Label.vue_vue_type_script_setup_true_lang.GLKeoCFU.js";import"./chunks/Dot.vue_vue_type_script_setup_true_lang.CUvfO4tu.js";/* empty css                                                   */import"./chunks/16.LYGXjtIU.js";/* empty css                                                     */import"./chunks/20.BT3dGDMG.js";import"./chunks/20.CfFwIoiA.js";import"./chunks/IconCheckbox.IfzXHsFQ.js";import"./chunks/SpinnerRing.vue_vue_type_script_setup_true_lang.DRMty5D9.js";import"./chunks/value.C5X7htjv.js";import"./chunks/adapter.DWVPlk6x.js";import"./chunks/use-loading.-SgieH35.js";import"./chunks/defu.CMw4_7D2.js";import"./chunks/isNil.CHIgUVhi.js";import"./chunks/baseIteratee.CLkZHCNq.js";import"./chunks/Uint8Array.BQK0loFa.js";import"./chunks/Set.CfmJ7xMC.js";import"./chunks/eq.PE3UIL_r.js";import"./chunks/isArrayLike.C0g-NlKf.js";import"./chunks/setToArray.DyeysI-S.js";import"./chunks/baseUniq.B02YtUOM.js";import"./chunks/baseFindIndex.D7XfJLKM.js";import"./chunks/theme.C2-JatQD.js";import"./chunks/base64.CRVHLH2y.js";import"./chunks/use-singleton.BZKiDE5h.js";import"./chunks/queue.DLTVddtq.js";/* empty css                                                       */import"./chunks/20.np-jgeRw.js";import"./chunks/20.BhNK4FFT.js";import"./chunks/create-image.CkAV8b2h.js";import"./chunks/avatar.qWHUbXZ4.js";import"./chunks/color-hash.CY8Op1ql.js";const Q={useWorker:typeof window<"u"&&!!window.Worker};function X(){return Q}function T(l){let e=l;const i=new Set;return{get value(){return e},set value(s){e=s;for(const f of i)f(s)},change(s){return i.add(s),()=>{i.delete(s)}},toBe(s){return new Promise(f=>{const w=this.change(h=>{h===s&&(w(),f())})})}}}const L=T(),z=T(!1);async function ee(){if(z.value&&await z.toBe(!1),!L.value){z.value=!0;try{const{default:l}=await S(async()=>{const{default:e}=await import("./chunks/worker-DSU9kkV3.BInE4CAo.js");return{default:e}},[]);L.value=new l({name:"rpc-worker"})}finally{z.value=!1}}return L.value}async function te(l,e){const i=Date.now(),s=await ee();return await new Promise((f,w)=>{const h=d=>{d.data.id===i&&(b(),d.data.error?w(d.data.error):f(d.data.result))},u=d=>{b(),w(d)},b=()=>{s.removeEventListener("message",h),s.removeEventListener("error",u)};s.addEventListener("message",h),s.addEventListener("error",u),s.postMessage({id:i,name:l,args:e})})}async function oe(l,e){return(await S(async()=>{const{callRPC:i}=await import("./chunks/call-lusBi33f.BPkT_al8.js");return{callRPC:i}},__vite__mapDeps([0,1,2]))).callRPC(l,e)}async function re(l,e){return X().useWorker?te(l,e):oe(l,e)}const ie=async(...l)=>await re("optimizePDF",l),se={class:"flex w-full min-h-screen"},ae={key:0,class:"flex items-center justify-center w-full min-h-screen"},ne={class:"w-1/3 p-6 text-center"},le={class:"mb-4"},ce=r("br",null,null,-1),pe=r("strong",null,"Please take it at your own risk",-1),me=["onClick"],de=r("a",{class:"hover:underline decoration-dashed",href:"https://github.com/privy-open-source/ghoulscript",target:"_blank"},[r("b",null,"Ghoulscript")],-1),ue={class:"w-full border border-default dark:border-dark-default"},fe={class:"flex p-2"},_e={class:"flex-grow"},ve={class:"w-full border dark:border-dark-default"},he={class:"flex p-2"},we={class:"flex-grow"},ye={key:0},qt=JSON.parse('{"title":"","description":"","frontmatter":{"layout":false},"headers":[],"relativePath":"tools/pdf-optimizer.md","filePath":"tools/pdf-optimizer.md"}'),ke={name:"tools/pdf-optimizer.md"},Ht=Object.assign(ke,{setup(l){const e=y(),i=y(),s=y(),f=y(),w=O(e),h=O(i),u=y(),b=y(),d=W(()=>{if(e.value&&i.value)return Math.round((i.value.size-e.value.size)/e.value.size*100)});N(e,async c=>{if(c)try{Y();const t=performance.now(),o=await ie(c,{noTransparency:!1}),_=e.value.name.replace(".pdf",".compressed.pdf");i.value=new File([o],_,{type:"application/pdf"}),b.value=(performance.now()-t)/1e3}finally{q()}}),I(c=>{var _,v;const t=(_=s.value)==null?void 0:_.container,o=(v=f.value)==null?void 0:v.container;if(t&&o){const P=()=>V(t,o),R=()=>V(o,t);t.addEventListener("scroll",P,{passive:!0}),o.addEventListener("scroll",R,{passive:!0}),c(()=>{t.removeEventListener("scroll",P),o.removeEventListener("scroll",R)})}});function V(c,t){t.scrollLeft=c.scrollLeft,t.scrollTop=c.scrollTop}function D(c,t=2,o=1024){if(c===0)return"0 Bytes";const _=[`${c>1?"Bytes":"Byte"}`,"KB","MB","GB","TB","PB","EB","ZB","YB"],v=Math.floor(Math.log(c)/Math.log(o));return`${Number.parseFloat((c/Math.pow(o,v)).toFixed(t))} ${_[v]}`}function U(){e.value=void 0,i.value=void 0}return(c,t)=>(g(),k("div",null,[r("div",se,[a(i)?(g(),k(C,{key:1},[r("div",ue,[p(M,{scale:a(u),"onUpdate:scale":t[1]||(t[1]=o=>B(u)?u.value=o:null),ref_key:"inputViewer",ref:s,src:a(w),layout:"fit"},{header:m(()=>[r("div",fe,[r("div",_e,[n(" Original Size: "),r("b",null,x(D(a(e).size)),1),n("  ")]),p(F,{size:"xs",onClick:U},{default:m(()=>[n(" Close ")]),_:1})])]),_:1},8,["scale","src"])]),r("div",ve,[p(M,{scale:a(u),"onUpdate:scale":t[2]||(t[2]=o=>B(u)?u.value=o:null),ref_key:"outputViewer",ref:f,src:a(h),layout:"fit"},{header:m(()=>[r("div",he,[r("div",we,[n(" Compressed Size: "),r("b",null,x(D(a(i).size)),1),n("  "),r("span",{class:$(a(d)<0?"text-green-50":"text-red-50")},[a(d)>0?(g(),k("span",ye,"+")):j("",!0),n("("+x(a(d))+"%) ",1)],2),n(" Duration: "+x(a(b).toFixed(2))+"s ",1)]),p(F,{href:a(h),download:a(i).name,color:"info",size:"xs"},{default:m(()=>[n(" Download Compressed ")]),_:1},8,["href","download"])])]),_:1},8,["scale","src"])])],64)):(g(),k("div",ae,[r("div",ne,[r("div",le,[p(E,{element:"h3"},{default:m(()=>[n(" PDF Optimizer ")]),_:1})]),p(A,{modelValue:a(e),"onUpdate:modelValue":t[0]||(t[0]=o=>B(e)?e.value=o:null),accept:"application/pdf"},{default:m(({isDragover:o,isHovered:_,model:v,browse:P})=>[r("div",{class:$(["flex flex-col items-center justify-center w-full p-6 space-y-3 border-2 border-dashed rounded aspect-video",[o?"bg-info dark:bg-dark-info border-info-emphasis dark:border-dark-info-emphasis":"bg-default dark:bg-dark-default border-default dark:border-dark-default"]])},[p(H,{variant:"danger",class:"text-start"},{default:m(()=>[n(" Some content may be lost during compressing."),ce,pe]),_:1}),p(K,{active:o||_},{default:m(()=>[p(Z,{class:"w-20 h-20 my-5 fill-info-emphasis dark:fill-dark-info-emphasis"})]),_:2},1032,["active"]),p(E,{element:"h5"},{default:m(()=>[n(" Upload Document ")]),_:1}),p(E,{element:"h6",class:"line-clamp-1"},{default:m(()=>[v?(g(),k(C,{key:1},[n(x(v.name),1)],64)):(g(),k(C,{key:0},[n(" Drag your document here or click "),r("a",{class:"text-info hover:underline",href:"#",onClick:G(P,["prevent"])},"Browse",8,me)],64))]),_:2},1024)],2)]),_:1},8,["modelValue"]),p(J,{class:"my-4"},{default:m(()=>[n(" Powered by: "),de]),_:1})])]))])]))}});export{qt as __pageData,Ht as default};
