import{m as l}from"./Uint8Array.BQK0loFa.js";import{a as g,c as m,b as _,o as y}from"./floating-ui.dom.Bv9LQ7l_.js";import{b as x}from"./use-idle.CTt8iXB7.js";import{d as w,P as v,r as b,z as E,o as M,c as O,m as d,f as c,p as u}from"./framework.BjhmxGx1.js";function P(e,s){return{x:(s.width-e.width)/2,y:(s.height-e.height)/2}}function k(e,s){return e.x+e.width>s.width||e.y+e.height>s.height}function C(e){var o;const s=new Map,i=l(t=>Math.round(t/15)*15);for(const t of e){const r=i(t.x),a=i(t.y),n=(o=s.get(r))!=null?o:new Map;n.set(a,t),s.set(r,n)}return t=>{var n;const r=i(t.x),a=i(t.y);return((n=s.get(r))==null?void 0:n.get(a))!==void 0}}function J(e){var n;const s=(n=e.checkOverlap)!=null?n:C(e.objects),i=P(e.size,e.offside),o={...e.size,...i};let t=!0,r=0,a=0;do t=!0,k(o,e.offside)&&(o.y=i.y+a,o.x=i.x,a+=15,t=!1),s(o,e.objects)&&(o.x+=15,o.y+=15,t=!1);while(!t&&++r<=500);return t||console.warn("Cannot find empty position, max iteration reach"),o}const z={"data-testid":"debug-x"},B={"data-testid":"debug-y"},D={"data-testid":"debug-page"},T={"data-testid":"debug-width"},F={"data-testid":"debug-height"},U=w({__name:"PdfObjectDebugger",setup(e){const{x:s,y:i,page:o,width:t,height:r}=v(x),a=b();return E(n=>{if(a.value){const f=g(a.value.parentElement,a.value,()=>{m(a.value.parentElement,a.value,{strategy:"absolute",middleware:[_(),y(12)]}).then(({x:p,y:h})=>{a.value&&(a.value.style.left=`${p||0}px`,a.value.style.top=`${h||0}px`)})},{animationFrame:!0});n(f)}},{flush:"post"}),(n,f)=>(M(),O("div",{ref_key:"target",ref:a,"data-testid":"pdf-debugger",class:"pdf-object__debugger"},[d("pre",z,"x: "+c(u(s)),1),d("pre",B,"y: "+c(u(i)),1),d("pre",D,"page: "+c(u(o)),1),d("pre",T,"width: "+c(u(t)),1),d("pre",F,"height: "+c(u(r)),1)],512))}});export{U as _,J as g};
