const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/interact.min.CbIEsjER.js","assets/chunks/commonjsHelpers.BosuxZz1.js","assets/chunks/pdf.Cz6_cyDq.js","assets/chunks/framework.BjhmxGx1.js"])))=>i.map(i=>d[i]);
import{I as m,r as k,an as ue,a0 as Z,Z as K,d as G,o as J,c as U,m as f,p as t,A as re,ac as M,K as V,w as X,b as fe,f as W,t as oe,a as O,l as ie,y as A,a3 as he,n as pe,ad as H,T as ve}from"./framework.BjhmxGx1.js";import{v as se}from"./index.DwUX65lQ.js";import{i as ge,h as ee}from"./index.C6_LL6lH.js";import{P as ye,c as we,d as me,e as xe,_ as _e,g as be}from"./use-idle.Dmyge5VX.js";import{_ as Pe}from"./Heading.vue_vue_type_script_setup_true_lang.CdMF7zxP.js";/* empty css                                                */import{w as ne,a as ce}from"./theme.C2-JatQD.js";import{u as De}from"./use-loading.-SgieH35.js";import{u as te,a as Ee}from"./index.BONkLgP_.js";import{o as z,c as Se,b as Le,s as ae}from"./index.CydGP8Vq.js";const Ne=Symbol("DropzoneContext");function ke(e,h){const l=m(!0),o=m(),a=k(),d=k();async function p(){if(y(),e.value){const{default:w}=await K(async()=>{const{default:n}=await import("./interact.min.CbIEsjER.js").then(g=>g.i);return{default:n}},__vite__mapDeps([0,1]));w.dynamicDrop(!0),o.value=w(h.value,{context:e.value}).dropzone({accept:".pdf-object",overlap:.95,enabled:l.value,checker(n,g,T,C,R,u,c){var v;return T&&(((v=e.value)==null?void 0:v.contains(c))||c.classList.contains("pdf-object--external"))},ondragenter(n){d.value=n.target,n.target.classList.add("hover")},ondragleave(n){n.target.classList.remove("hover")},ondrop(n){d.value=n.target,a.value=n.target,n.target.classList.remove("hover")}})}}function y(){o.value&&o.value.unset()}return ge(e,w=>{w.some(g=>g.type==="childList"&&g.target.matches(h.value))&&p()},{subtree:!0,childList:!0}),ue(()=>{y()}),Z(Ne,{dropzone:a,hoverzone:d}),l}const Te="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='595'%20height='842'%20aria-labelledby='loading-aria'%20preserveAspectRatio='none'%20role='img'%20viewBox='0%200%20595%20842'%3e%3ctitle%20id='loading-aria'%3eLoading...%3c/title%3e%3crect%20width='100%25'%20height='100%25'%20x='0'%20y='0'%20clip-path='url(%23clip-path)'%20style='fill:url(%23fill)'/%3e%3cdefs%3e%3cclipPath%20id='clip-path'%3e%3crect%20width='191'%20height='14'%20x='44'%20y='64'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='44'%20y='94'%20rx='2.068'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='152'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='182'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='212'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='242'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='272'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='302'%20rx='7'/%3e%3crect%20width='349'%20height='14'%20x='44'%20y='332'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='390'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='420'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='450'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='480'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='510'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='540'%20rx='7'/%3e%3crect%20width='183'%20height='14'%20x='44'%20y='570'%20rx='7'/%3e%3crect%20width='191'%20height='14'%20x='360'%20y='628'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='411'%20y='678'%20rx='2.068'/%3e%3crect%20width='191'%20height='14'%20x='44'%20y='64'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='44'%20y='94'%20rx='2.068'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='152'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='182'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='212'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='242'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='272'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='302'%20rx='7'/%3e%3crect%20width='349'%20height='14'%20x='44'%20y='332'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='390'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='420'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='450'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='480'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='510'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='540'%20rx='7'/%3e%3crect%20width='183'%20height='14'%20x='44'%20y='570'%20rx='7'/%3e%3crect%20width='191'%20height='14'%20x='360'%20y='628'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='411'%20y='678'%20rx='2.068'/%3e%3c/clipPath%3e%3clinearGradient%20id='fill'%3e%3cstop%20offset='.6'%20stop-color='%23E7E7E8'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='-2;%20-2;%201'/%3e%3c/stop%3e%3cstop%20offset='1.6'%20stop-color='%23CFCFD1'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='-1;%20-1;%202'/%3e%3c/stop%3e%3cstop%20offset='2.6'%20stop-color='%23E7E7E8'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='0;%200;%203'/%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Ce={"data-testid":"pdf-loading",class:"pdf__loading"},Ve=["src"],Oe=G({__name:"PdfLoading",setup(e){return(h,l)=>(J(),U("div",Ce,[f("img",{src:t(Te),width:"793",height:"1122"},null,8,Ve)]))}});let F,$;async function Y(){if(!F){const e=await K(()=>import("./pdf.Cz6_cyDq.js"),__vite__mapDeps([2,3]));typeof window<"u"&&"Worker"in window&&(e.GlobalWorkerOptions.workerSrc=ne(`pdfjs-dist@${e.version}/legacy/build/pdf.worker.min.mjs`,ce())),F=e}return F}async function q(){return await Y(),$||($=await K(()=>import("./pdf_viewer.MidBioDg.js"),[])),$}async function $e(...e){return await Y(),F.getDocument(...e)}async function Re(){return ne(`pdfjs-dist@${await le()}/cmaps/`,ce())}async function le(){return await Y(),F.version}async function je(){return await q(),new $.EventBus}async function Be(...e){return await q(),new $.PDFViewer(...e)}async function Me(...e){return await q(),new $.PDFLinkService(...e)}const Fe={"data-testid":"pdf-error",class:"pdf__error"},Ie={class:"mt-7"},ze=f("dt",null,"URL:",-1),Ae={class:"truncate"},Ge=["href"],Je=f("dt",null," Reason: ",-1),Ue=f("dt",null," PDFJS Version: ",-1),We=G({__name:"PdfError",props:{url:{type:String,default:""},error:{type:Object,default:()=>({})}},setup(e){const h=k("");return re(async()=>{h.value=await le()}),(l,o)=>M((J(),U("div",Fe,[V(Pe,{element:"h3"},{default:X(()=>[fe(" Failed to load PDF ")]),_:1}),f("dl",Ie,[ze,f("dd",Ae,[f("a",{href:e.url,target:"_blank"},[f("code",null,W(e.url),1)],8,Ge)]),Je,f("dd",null,[f("code",null,W(e.error.message),1)]),Ue,f("dd",null,[f("code",null,W(t(h)),1)])])])),[[t(se),1122/793]])}}),He=G({__name:"PdfObjects",props:{dropTarget:{type:String,default:".pdfViewer > .page"}},setup(e){const h=e,l=new Map,o=k(),a=we(),d=oe(h,"dropTarget");return ke(o,d),Z(ye,{...a,objects:l,root:o}),(p,y)=>(J(),U("div",{ref_key:"root",ref:o,class:"pdf-objects","data-testid":"pdf-objects"},[O(p.$slots,"default")],512))}});function Xe(e,h){const l=m(),o=m(),a=m(),d=m(),p=m(),y=ie(()=>{var r,s;return(s=(r=l.value)==null?void 0:r.numPages)!=null?s:0}),w=te(1,.1,2),n=te(1,1,Ee(y,1)),g=De(),T=m(!1),C=m(),R=z(),u=z(),c=z(),v=z();async function j(r,s,b={}){g.value=!0,C.value=void 0;try{await B(),r&&(d.value=await $e({url:r,password:s,cMapUrl:await Re(),cMapPacked:!0,disableStream:b.disableStream,disableRange:b.disableRange,httpHeaders:b.httpHeaders}),d.value.onProgress=u.trigger,l.value=await d.value.promise,a.value.setDocument(l.value),p.value.setDocument(l.value),R.trigger(l.value))}catch(x){x instanceof Error&&(C.value=x,c.trigger(x))}finally{g.value=!1}}async function B(){var r,s;d.value&&!d.value.destroyed&&(await d.value.destroy(),l.value=void 0,d.value=void 0,(r=a.value)==null||r.setDocument(null),(s=p.value)==null||s.setDocument(null))}async function _(){if(typeof navigator<"u"&&e.value&&h.value){const r=await je();r.on("pagesinit",()=>{var x,I;const s=(I=(x=h.value)==null?void 0:x.clientWidth)!=null?I:0,b=s>0&&s<793;a.value.currentScaleValue=b?"page-width":"1",a.value.currentPageNumber=n.value,T.value=!0,v.trigger(a.value)}),r.on("pagechanging",s=>{n.value=s.pageNumber}),r.on("scalechanging",s=>{w.value=s.scale}),o.value=r,p.value=await Me({eventBus:o.value}),a.value=await Be({container:e.value,viewer:h.value,eventBus:o.value,linkService:p.value,removePageBorders:!0,annotationEditorMode:-1}),p.value.setViewer(a.value)}}return A([e,h],async([r,s])=>{a.value?r&&s&&(a.value.container=r,a.value.viewer=s,l.value&&a.value.setDocument(l.value),a.value.update()):await _()}),A(n,r=>{a.value&&r!==a.value.currentPageNumber&&(a.value.currentPageNumber=r)}),A(w,r=>{a.value&&r!==a.value.currentScale&&(a.value.currentScale=r)}),he(async()=>{var r;await B(),(r=a.value)==null||r.cleanup()}),{page:n,scale:w,totalPage:y,loading:g,error:C,ready:T,openDoc:j,closeDoc:B,pdfDoc:l,pdfEventBus:o,pdfViewer:a,pdfLoadingTask:d,pdfLinkService:p,onLoaded:R.on,onError:c.on,onReady:v.on,onLoading:u.on}}const Ze=["data-page","data-scale"],Ke={class:"pdf__header"},Ye={class:"pdf__footer"},ct=G({__name:"PdfViewer",props:{src:{type:String,default:""},page:{type:Number,default:1},scale:{type:Number,default:1},password:{type:String,default:void 0},layout:{type:String,default:"fixed"},ratio:{type:[Number,String],default:210/297},offsetTop:{type:[Number,String],default:0},config:{type:[Object],default:()=>({})},firstNavLabel:{type:String,default:"First"},lastNavLabel:{type:String,default:"Last"},numOfPagesNavLabel:{type:String,default:"of"}},emits:["ready","loaded","loading","error","error-password","update:page","update:scale"],setup(e,{expose:h,emit:l}){const o=e,a=l,d=k(),p=k(),y=k(),w=me(p),n=ee(o,"page"),g=ee(o,"scale"),T=Se(oe(o,"offsetTop"),{nanToZero:!0}),C=xe(d,{offsetTop:T}),R=ie(()=>{const i=[];return o.layout&&i.push(`pdf-viewer--layout-${o.layout}`),i}),{page:u,scale:c,totalPage:v,openDoc:j,closeDoc:B,pdfDoc:_,loading:r,error:s,onLoaded:b,onError:x,onReady:I,onLoading:de}=Xe(p,y);Le(()=>[o.src,o.password],([i,Q])=>{j(i,Q,o.config)},{debounce:500}),A(()=>o.layout,i=>{C.value=i==="fit"},{immediate:!0}),re(async()=>{o.src&&j(o.src,o.password,o.config)}),b(i=>{a("loaded",i)}),x(i=>{i.name==="PasswordException"&&a("error-password",i),a("error",i)}),I(i=>{a("ready",i)}),de(i=>{a("loading",i)});function P(){c.value=Math.round(c.value/.1)*.1+.1}function D(){c.value=Math.round(c.value/.1)*.1-.1}function E(){u.value++}function S(){u.value--}function L(){u.value=1}function N(){u.value=v.value}return Z(be,{page:u,scale:c,totalPage:v,zoomIn:P,zoomOut:D,next:E,prev:S,first:L,last:N}),ae(u,n),ae(c,g),h({page:u,scale:c,root:d,container:p,viewer:y,loading:r,totalPage:v,zoomIn:P,zoomOut:D,next:E,prev:S,openDoc:j,closeDoc:B,first:L,last:N}),(i,Q)=>M((J(),U("div",{ref_key:"root",ref:d,"data-testid":"pdf-viewer",class:pe(["pdf",t(R)]),"data-page":t(u),"data-scale":t(c)},[f("div",Ke,[O(i.$slots,"header",{page:t(u),scale:t(c),totalPage:t(v),zoomIn:P,zoomOut:D,next:E,prev:S,first:L,last:N,doc:t(_)})]),V(He,{class:"pdf__wrapper"},{default:X(()=>[f("div",{ref_key:"container",ref:p,class:"pdf__container pdfContainer"},[M(V(Oe,null,null,512),[[H,t(r)||!e.src]]),M(V(We,{url:e.src,error:t(s)},null,8,["url","error"]),[[H,!t(r)&&t(s)]]),f("div",{ref_key:"viewer",ref:y,class:"pdf__viewer pdfViewer"},null,512),O(i.$slots,"default",{page:t(u),scale:t(c),totalPage:t(v),zoomIn:P,zoomOut:D,next:E,prev:S,first:L,last:N,doc:t(_)})],512),O(i.$slots,"container",{page:t(u),scale:t(c),totalPage:t(v),zoomIn:P,zoomOut:D,next:E,prev:S,first:L,last:N,doc:t(_)}),V(ve,{name:"slide-up"},{default:X(()=>[M(V(_e,{"first-nav-label":e.firstNavLabel,"last-nav-label":e.lastNavLabel,"num-of-pages-nav-label":e.numOfPagesNavLabel},null,8,["first-nav-label","last-nav-label","num-of-pages-nav-label"]),[[H,e.src&&!t(w)&&!t(r)&&!t(s)]])]),_:1}),O(i.$slots,"body",{page:t(u),scale:t(c),totalPage:t(v),zoomIn:P,zoomOut:D,next:E,prev:S,first:L,last:N,doc:t(_)})]),_:3}),f("div",Ye,[O(i.$slots,"footer",{page:t(u),scale:t(c),totalPage:t(v),zoomIn:P,zoomOut:D,next:E,prev:S,first:L,last:N,doc:t(_)})])],10,Ze)),[[t(se),e.layout==="fixed"?Number(e.ratio):0]])}});export{Ne as D,ct as _};
