import{d as y,s as w,X as k,o as c,b as g,as as C,at as T,H as b,D as h,h as D,c as _,G as I,w as B,F as x,C as N,k as v,aM as F,n as $,aC as m,p as E,P as G}from"./framework.CI6Dj8yt.js";import{N as O}from"./index.DfEDK_lI.js";import{d as P}from"./defu.BhsQtd2f.js";import"./use-singleton.P5iNpjxE.js";import"./queue.DLTVddtq.js";import"./noop.DX6rZLP_.js";const R=y({__name:"NotifyItem",props:{option:{type:Object,default:()=>({})}},emits:["dismissed","update:option"],setup(f,{emit:d}){const a=f,o=d;function u(){o("dismissed")}function r(t){o("update:option",t)}return w(t=>{var p;const e=(p=a.option.duration)!=null?p:3e3;if(Number.isFinite(e)&&e>0){const n=setTimeout(u,e);t(()=>{clearTimeout(n)})}}),k(O,{close:u,update:r}),(t,e)=>(c(),g(b(f.option.component),C(T(f.option.props)),null,16))}}),z=y({__name:"NotifyGroup",props:{position:{type:String,default:"bottom-left"},noAnimation:{type:Boolean,default:!1}},setup(f,{expose:d}){const a=f,o=h([]),u=D(()=>{const n=[];return a.position&&n.push(`notify-group--${a.position}`),n});function r(n){const i=Symbol("NotifyID"),s={...n,_id:i};return o.value.push(s),m(o),i}function t(n){o.value.splice(o.value.findIndex(i=>i._id===n),1),m(o)}function e(n,i){const s=o.value.findIndex(l=>l._id===n);s>-1&&(o.value[s]=P(i,o.value[s])),m(o)}function p(n){const i=r(n);return{update(s){e(i,s)},close(){t(i)}}}return d({add:r,show:p,remove:t,update:e}),(n,i)=>(c(),_("div",{"data-testid":"notify-group",class:$(["notify-group",v(u)])},[I(F,{tag:"div",name:"notify",class:"notify-group__container"},{default:B(()=>[(c(!0),_(x,null,N(v(o),s=>(c(),g(R,{key:s._id,option:s,"onUpdate:option":l=>e(s._id,l),onDismissed:l=>t(s._id)},null,8,["option","onUpdate:option","onDismissed"]))),128))]),_:1})],2))}}),M={"data-testid":"notify"},L=y({__name:"Notify",setup(f,{expose:d}){const a=h(new Map);async function o(u){var e,p;const r=(e=u.position)!=null?e:"bottom-left";let t=a.value.get(r);return t||(t={ref:E(),position:r},a.value.set(r,t),m(a),await G()),(p=t.ref.value)==null?void 0:p.show(u)}return d({show:o}),(u,r)=>(c(),_("div",M,[(c(!0),_(x,null,N(v(a).values(),t=>(c(),g(z,{key:t.position,ref_for:!0,ref:e=>{t.ref.value=e},position:t.position},null,8,["position"]))),128))]))}});export{L as default};
