import{d as y,x as w,Z as T,o as c,g,af as k,ag as I,J as b,G as h,l as C,c as _,I as B,w as D,F as x,E as N,p as v,aM as E,n as F,ap as m,r as R,R as $}from"./framework.Ae0H8jK5.js";import{N as G}from"./index.B0MPAoIO.js";import{d as O}from"./defu.BhsQtd2f.js";import"./use-singleton.MAn_zPei.js";import"./queue.DLTVddtq.js";import"./noop.DX6rZLP_.js";const z=y({__name:"NotifyItem",props:{option:{type:Object,default:()=>({})}},emits:["dismissed","update:option"],setup(f,{emit:l}){const a=f,o=l;function u(){o("dismissed")}function r(t){o("update:option",t)}return w(t=>{var p;const e=(p=a.option.duration)!=null?p:3e3;if(Number.isFinite(e)&&e>0){const n=setTimeout(u,e);t(()=>{clearTimeout(n)})}}),T(G,{close:u,update:r}),(t,e)=>(c(),g(b(f.option.component),k(I(f.option.props)),null,16))}}),M=y({__name:"NotifyGroup",props:{position:{type:String,default:"bottom-left"},noAnimation:{type:Boolean,default:!1}},setup(f,{expose:l}){const a=f,o=h([]),u=C(()=>{const n=[];return a.position&&n.push(`notify-group--${a.position}`),n});function r(n){const i=Symbol("NotifyID"),s={...n,_id:i};return o.value.push(s),m(o),i}function t(n){o.value.splice(o.value.findIndex(i=>i._id===n),1),m(o)}function e(n,i){const s=o.value.findIndex(d=>d._id===n);s>-1&&(o.value[s]=O(i,o.value[s])),m(o)}function p(n){const i=r(n);return{update(s){e(i,s)},close(){t(i)}}}return l({add:r,show:p,remove:t,update:e}),(n,i)=>(c(),_("div",{"data-testid":"notify-group",class:F(["notify-group",v(u)])},[B(E,{tag:"div",name:"notify",class:"notify-group__container"},{default:D(()=>[(c(!0),_(x,null,N(v(o),s=>(c(),g(z,{key:s._id,option:s,"onUpdate:option":d=>e(s._id,d),onDismissed:d=>t(s._id)},null,8,["option","onUpdate:option","onDismissed"]))),128))]),_:1})],2))}}),P={"data-testid":"notify"},V=y({__name:"Notify",setup(f,{expose:l}){const a=h(new Map);async function o(u){var e,p;const r=(e=u.position)!=null?e:"bottom-left";let t=a.value.get(r);return t||(t={ref:R(),position:r},a.value.set(r,t),m(a),await $()),(p=t.ref.value)==null?void 0:p.show(u)}return l({show:o}),(u,r)=>(c(),_("div",P,[(c(!0),_(x,null,N(v(a).values(),t=>(c(),g(M,{key:t.position,ref_for:!0,ref:e=>{t.ref.value=e},position:t.position},null,8,["position"]))),128))]))}});export{V as default};
