import{_ as D}from"./Checkbox.vue_vue_type_script_setup_true_lang.Bob1A7BI.js";/* empty css                                                 */import{u as A}from"./index.CD5JWynm.js";import{I as B,D as N}from"./vuedraggable.umd.D8M6Keux.js";import{d as S}from"./defu.BhsQtd2f.js";import{d as T,l as u,_ as H,D as p,o as s,c as d,I as g,h as r,F as v,E as w,n as b,P as f,a as m,b as k,f as c,g as I,w as L,m as h}from"./framework.Ae0H8jK5.js";const U=T({components:{Checkbox:D,IconDrag:B,Draggable:N},props:{variant:{type:String,default:"flexible"},modelValue:{type:Array,default:()=>[]},fields:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},selectable:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},emptyLabel:{type:String,default:"There are no records to show"},noLabel:{type:Boolean,default:!1},showTableHeader:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue","update:items"],setup(e,{emit:o}){const n=A(e),V=u({get(){return e.items.map(t=>S(t,{_key:Symbol("item-key")}))},set(t){o("update:items",t)}}),$=u(()=>{const t=[];return e.variant&&t.push(`datatable--${e.variant}`),e.selectable&&t.push("datatable--selectable"),e.draggable&&t.push("datatable--draggable"),e.noLabel&&e.variant==="flexible"&&t.push("datatable--no-label"),e.showTableHeader&&e.variant==="flexible"&&t.push("datatable--show-table-header"),t}),y=u(()=>e.items.filter(t=>t._selectable!==!1)),i=u({get(){return e.items.length===0?!1:n.value.length===y.value.length},set(t){i.value!==t&&(n.value=t?[...y.value]:[])}}),_=u(()=>n.value.length>0&&n.value.length<y.value.length);return{model:n,rows:V,classNames:$,selectAll:i,indeterminate:_}}}),z={key:0,class:"datatable__headers"},E={key:0,class:"datatable__header datatable__drag"},F={key:1,class:"datatable__header datatable__checkbox"},j=["data-header"],M={class:"datatable__row","data-role":"row"},P={key:0,class:"datatable__cell datatable__drag","data-testid":"datatable-drag-handle"},R={key:1,class:"datatable__cell datatable__checkbox"},q=["data-cell"],G={key:2,class:"datatable__body"},J={class:"datatable__row"},K=["data-cell"],O={"data-testid":"datatable-empty",class:"datatable__cell datatable__cell--empty datatable__state-empty"},Q={class:"flex items-center justify-center text-subtle dark:text-dark-subtle"};function W(e,o,n,V,$,y){const i=p("IconDrag"),_=p("Checkbox"),t=p("Draggable");return s(),d("div",{"data-testid":"datatable",class:b(["datatable",e.classNames])},[e.variant==="static"||e.variant==="flexible"&&e.showTableHeader?(s(),d("div",z,[e.draggable?(s(),d("div",E,[g(i)])):r("",!0),e.selectable?(s(),d("div",F,[g(_,{modelValue:e.selectAll,"onUpdate:modelValue":o[0]||(o[0]=a=>e.selectAll=a),"data-testid":"datatable-select-all",indeterminate:e.indeterminate},null,8,["modelValue","indeterminate"])])):r("",!0),(s(!0),d(v,null,w(e.fields,a=>(s(),d("div",{key:a.key,class:b(["datatable__header",a.thClass]),"data-testid":"datatable-static-header",style:f(a.width?{width:`${a.width}%`}:{flex:"1 1 0%"}),"data-header":a.key},[m(e.$slots,`head(${a.key})`,{label:a.label,field:a},()=>[k(c(a.label),1)])],14,j))),128))])):r("",!0),Array.isArray(e.items)&&e.items.length>0?(s(),I(t,{key:1,modelValue:e.rows,"onUpdate:modelValue":o[2]||(o[2]=a=>e.rows=a),class:"datatable__body",handle:".datatable__drag","item-key":"_key",disabled:!e.draggable},{item:L(({element:a,index:C})=>[h("div",M,[e.draggable?(s(),d("div",P,[g(i)])):r("",!0),e.selectable?(s(),d("div",R,[g(_,{modelValue:e.model,"onUpdate:modelValue":o[1]||(o[1]=l=>e.model=l),"data-testid":"datatable-select",value:a,disabled:a._selectable===!1},null,8,["modelValue","value","disabled"])])):r("",!0),(s(!0),d(v,null,w(e.fields,l=>(s(),d("div",{key:l.key,class:b(["datatable__cell",l.tdClass]),"data-testid":"datatable-cell",style:f(l.width?{width:`${l.width}%`}:{flex:"1 1 0%"}),"data-cell":l.key},[e.variant==="flexible"?(s(),d("div",{key:0,class:b(["datatable__header",l.thClass])},[m(e.$slots,`head(${l.key})`,{label:l.label,field:l,dataHeader:l.key},()=>[k(c(l.label),1)])],2)):r("",!0),m(e.$slots,`cell(${l.key})`,{index:C,item:a},()=>[k(c(l.formatter(a[l.key],a)),1)])],14,q))),128))])]),_:3},8,["modelValue","disabled"])):(s(),d("div",G,[h("div",J,[e.variant==="flexible"?(s(!0),d(v,{key:0},w(e.fields,a=>(s(),d("div",{key:a.key,class:b(["datatable__cell datatable__cell--empty",a.tdClass]),"data-testid":"datatable-cell-empty",style:f(a.width?{width:`${a.width}%`}:{flex:"1 1 0%"}),"data-cell":a.key},[h("div",{class:b(["datatable__header",a.thClass])},[m(e.$slots,`head(${a.key})`,{label:a.label,field:a,dataHeader:a.key},()=>[k(c(a.label),1)])],2)],14,K))),128)):r("",!0),h("div",O,[m(e.$slots,"empty",{},()=>[h("span",Q,c(e.emptyLabel),1)])])])]))],2)}const te=H(U,[["render",W]]);export{te as p};
