const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/interact.min.BKitjnf_.js","assets/chunks/commonjsHelpers.BosuxZz1.js","assets/chunks/pdf.BC_zA7NJ.js","assets/chunks/framework.Ae0H8jK5.js"])))=>i.map(i=>d[i]);
import{G as m,r as k,al as ue,Z,X as Y,d as G,o as J,c as U,m as f,p as a,y as re,aa as M,I as V,w as H,b as fe,f as W,t as oe,a as O,l as ie,v as A,a1 as he,n as pe,ab as X,T as ve}from"./framework.Ae0H8jK5.js";import{v as ne}from"./index.CFgIHItP.js";import{i as ge,h as ee}from"./index.C86NPbNV.js";import{P as ye,c as we,d as me,e as xe,_ as _e,g as be}from"./use-idle.saCRdrsb.js";import{_ as Pe}from"./Heading.vue_vue_type_script_setup_true_lang.2d9qUuwT.js";/* empty css                                                */import{w as se,a as ce}from"./theme.Cwq3e90z.js";import{u as De}from"./use-loading.CEYATiXG.js";import{u as te,a as Ee}from"./index.DVVjvVJm.js";import{o as z,c as Se,b as Le,s as ae}from"./index.BXdnohvQ.js";const Ne=Symbol("DropzoneContext");function ke(e,h){const l=m(!0),t=m(),r=k(),d=k();async function p(){if(y(),e.value){const{default:w}=await Y(async()=>{const{default:s}=await import("./interact.min.BKitjnf_.js").then(g=>g.i);return{default:s}},__vite__mapDeps([0,1]));w.dynamicDrop(!0),t.value=w(h.value,{context:e.value}).dropzone({accept:".pdf-object",overlap:.95,enabled:l.value,checker(s,g,T,C,R,u,c){var v;return T&&(((v=e.value)==null?void 0:v.contains(c))||c.classList.contains("pdf-object--external"))},ondragenter(s){d.value=s.target,s.target.classList.add("hover")},ondragleave(s){s.target.classList.remove("hover")},ondrop(s){d.value=s.target,r.value=s.target,s.target.classList.remove("hover")}})}}function y(){t.value&&t.value.unset()}return ge(e,w=>{w.some(g=>g.type==="childList"&&g.target.matches(h.value))&&p()},{subtree:!0,childList:!0}),ue(()=>{y()}),Z(Ne,{dropzone:r,hoverzone:d}),l}const Te="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='595'%20height='842'%20aria-labelledby='loading-aria'%20preserveAspectRatio='none'%20role='img'%20viewBox='0%200%20595%20842'%3e%3ctitle%20id='loading-aria'%3eLoading...%3c/title%3e%3crect%20width='100%25'%20height='100%25'%20x='0'%20y='0'%20clip-path='url(%23clip-path)'%20style='fill:url(%23fill)'/%3e%3cdefs%3e%3cclipPath%20id='clip-path'%3e%3crect%20width='191'%20height='14'%20x='44'%20y='64'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='44'%20y='94'%20rx='2.068'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='152'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='182'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='212'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='242'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='272'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='302'%20rx='7'/%3e%3crect%20width='349'%20height='14'%20x='44'%20y='332'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='390'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='420'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='450'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='480'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='510'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='540'%20rx='7'/%3e%3crect%20width='183'%20height='14'%20x='44'%20y='570'%20rx='7'/%3e%3crect%20width='191'%20height='14'%20x='360'%20y='628'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='411'%20y='678'%20rx='2.068'/%3e%3crect%20width='191'%20height='14'%20x='44'%20y='64'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='44'%20y='94'%20rx='2.068'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='152'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='182'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='212'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='242'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='272'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='302'%20rx='7'/%3e%3crect%20width='349'%20height='14'%20x='44'%20y='332'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='390'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='420'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='450'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='480'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='510'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='540'%20rx='7'/%3e%3crect%20width='183'%20height='14'%20x='44'%20y='570'%20rx='7'/%3e%3crect%20width='191'%20height='14'%20x='360'%20y='628'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='411'%20y='678'%20rx='2.068'/%3e%3c/clipPath%3e%3clinearGradient%20id='fill'%3e%3cstop%20offset='.6'%20stop-color='%23E7E7E8'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='-2;%20-2;%201'/%3e%3c/stop%3e%3cstop%20offset='1.6'%20stop-color='%23CFCFD1'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='-1;%20-1;%202'/%3e%3c/stop%3e%3cstop%20offset='2.6'%20stop-color='%23E7E7E8'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='0;%200;%203'/%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Ce={"data-testid":"pdf-loading",class:"pdf__loading"},Ve=["src"],Oe=G({__name:"PdfLoading",setup(e){return(h,l)=>(J(),U("div",Ce,[f("img",{src:a(Te),width:"793",height:"1122"},null,8,Ve)]))}});let F,$;async function q(){if(!F){const e=await Y(()=>import("./pdf.BC_zA7NJ.js"),__vite__mapDeps([2,3]));typeof window<"u"&&"Worker"in window&&(e.GlobalWorkerOptions.workerSrc=se(`pdfjs-dist@${e.version}/legacy/build/pdf.worker.min.mjs`,ce())),F=e}return F}async function K(){return await q(),$||($=await Y(()=>import("./pdf_viewer.MidBioDg.js"),[])),$}async function $e(...e){return await q(),F.getDocument(...e)}async function Re(){return se(`pdfjs-dist@${await le()}/cmaps/`,ce())}async function le(){return await q(),F.version}async function je(){return await K(),new $.EventBus}async function Be(...e){return await K(),new $.PDFViewer(...e)}async function Me(...e){return await K(),new $.PDFLinkService(...e)}const Fe={"data-testid":"pdf-error",class:"pdf__error"},Ie={class:"mt-7"},ze={class:"truncate"},Ae=["href"],Ge=G({__name:"PdfError",props:{url:{type:String,default:""},error:{type:Object,default:()=>({})}},setup(e){const h=k("");return re(async()=>{h.value=await le()}),(l,t)=>M((J(),U("div",Fe,[V(Pe,{element:"h3"},{default:H(()=>t[0]||(t[0]=[fe(" Failed to load PDF ")])),_:1}),f("dl",Ie,[t[1]||(t[1]=f("dt",null,"URL:",-1)),f("dd",ze,[f("a",{href:e.url,target:"_blank"},[f("code",null,W(e.url),1)],8,Ae)]),t[2]||(t[2]=f("dt",null," Reason: ",-1)),f("dd",null,[f("code",null,W(e.error.message),1)]),t[3]||(t[3]=f("dt",null," PDFJS Version: ",-1)),f("dd",null,[f("code",null,W(a(h)),1)])])])),[[a(ne),1122/793]])}}),Je=G({__name:"PdfObjects",props:{dropTarget:{type:String,default:".pdfViewer > .page"}},setup(e){const h=e,l=new Map,t=k(),r=we(),d=oe(h,"dropTarget");return ke(t,d),Z(ye,{...r,objects:l,root:t}),(p,y)=>(J(),U("div",{ref_key:"root",ref:t,class:"pdf-objects","data-testid":"pdf-objects"},[O(p.$slots,"default")],512))}});function Ue(e,h){const l=m(),t=m(),r=m(),d=m(),p=m(),y=ie(()=>{var o,n;return(n=(o=l.value)==null?void 0:o.numPages)!=null?n:0}),w=te(1,.1,2),s=te(1,1,Ee(y,1)),g=De(),T=m(!1),C=m(),R=z(),u=z(),c=z(),v=z();async function j(o,n,b={}){g.value=!0,C.value=void 0;try{await B(),o&&(d.value=await $e({url:o,password:n,cMapUrl:await Re(),cMapPacked:!0,disableStream:b.disableStream,disableRange:b.disableRange,httpHeaders:b.httpHeaders}),d.value.onProgress=u.trigger,l.value=await d.value.promise,r.value.setDocument(l.value),p.value.setDocument(l.value),R.trigger(l.value))}catch(x){x instanceof Error&&(C.value=x,c.trigger(x))}finally{g.value=!1}}async function B(){var o,n;d.value&&!d.value.destroyed&&(await d.value.destroy(),l.value=void 0,d.value=void 0,(o=r.value)==null||o.setDocument(null),(n=p.value)==null||n.setDocument(null))}async function _(){if(typeof navigator<"u"&&e.value&&h.value){const o=await je();o.on("pagesinit",()=>{var x,I;const n=(I=(x=h.value)==null?void 0:x.clientWidth)!=null?I:0,b=n>0&&n<793;r.value.currentScaleValue=b?"page-width":"1",r.value.currentPageNumber=s.value,T.value=!0,v.trigger(r.value)}),o.on("pagechanging",n=>{s.value=n.pageNumber}),o.on("scalechanging",n=>{w.value=n.scale}),t.value=o,p.value=await Me({eventBus:t.value}),r.value=await Be({container:e.value,viewer:h.value,eventBus:t.value,linkService:p.value,removePageBorders:!0,annotationEditorMode:-1}),p.value.setViewer(r.value)}}return A([e,h],async([o,n])=>{r.value?o&&n&&(r.value.container=o,r.value.viewer=n,l.value&&r.value.setDocument(l.value),r.value.update()):await _()}),A(s,o=>{r.value&&o!==r.value.currentPageNumber&&(r.value.currentPageNumber=o)}),A(w,o=>{r.value&&o!==r.value.currentScale&&(r.value.currentScale=o)}),he(async()=>{var o;await B(),(o=r.value)==null||o.cleanup()}),{page:s,scale:w,totalPage:y,loading:g,error:C,ready:T,openDoc:j,closeDoc:B,pdfDoc:l,pdfEventBus:t,pdfViewer:r,pdfLoadingTask:d,pdfLinkService:p,onLoaded:R.on,onError:c.on,onReady:v.on,onLoading:u.on}}const We=["data-page","data-scale"],Xe={class:"pdf__header"},He={class:"pdf__footer"},it=G({__name:"PdfViewer",props:{src:{type:String,default:""},page:{type:Number,default:1},scale:{type:Number,default:1},password:{type:String,default:void 0},layout:{type:String,default:"fixed"},ratio:{type:[Number,String],default:210/297},offsetTop:{type:[Number,String],default:0},config:{type:[Object],default:()=>({})},firstNavLabel:{type:String,default:"First"},lastNavLabel:{type:String,default:"Last"},numOfPagesNavLabel:{type:String,default:"of"}},emits:["ready","loaded","loading","error","error-password","update:page","update:scale"],setup(e,{expose:h,emit:l}){const t=e,r=l,d=k(),p=k(),y=k(),w=me(p),s=ee(t,"page"),g=ee(t,"scale"),T=Se(oe(t,"offsetTop"),{nanToZero:!0}),C=xe(d,{offsetTop:T}),R=ie(()=>{const i=[];return t.layout&&i.push(`pdf-viewer--layout-${t.layout}`),i}),{page:u,scale:c,totalPage:v,openDoc:j,closeDoc:B,pdfDoc:_,loading:o,error:n,onLoaded:b,onError:x,onReady:I,onLoading:de}=Ue(p,y);Le(()=>[t.src,t.password],([i,Q])=>{j(i,Q,t.config)},{debounce:500}),A(()=>t.layout,i=>{C.value=i==="fit"},{immediate:!0}),re(async()=>{t.src&&j(t.src,t.password,t.config)}),b(i=>{r("loaded",i)}),x(i=>{i.name==="PasswordException"&&r("error-password",i),r("error",i)}),I(i=>{r("ready",i)}),de(i=>{r("loading",i)});function P(){c.value=Math.round(c.value/.1)*.1+.1}function D(){c.value=Math.round(c.value/.1)*.1-.1}function E(){u.value++}function S(){u.value--}function L(){u.value=1}function N(){u.value=v.value}return Z(be,{page:u,scale:c,totalPage:v,zoomIn:P,zoomOut:D,next:E,prev:S,first:L,last:N}),ae(u,s),ae(c,g),h({page:u,scale:c,root:d,container:p,viewer:y,loading:o,totalPage:v,zoomIn:P,zoomOut:D,next:E,prev:S,openDoc:j,closeDoc:B,first:L,last:N}),(i,Q)=>M((J(),U("div",{ref_key:"root",ref:d,"data-testid":"pdf-viewer",class:pe(["pdf",a(R)]),"data-page":a(u),"data-scale":a(c)},[f("div",Xe,[O(i.$slots,"header",{page:a(u),scale:a(c),totalPage:a(v),zoomIn:P,zoomOut:D,next:E,prev:S,first:L,last:N,doc:a(_)})]),V(Je,{class:"pdf__wrapper"},{default:H(()=>[f("div",{ref_key:"container",ref:p,class:"pdf__container pdfContainer"},[M(V(Oe,null,null,512),[[X,a(o)||!e.src]]),M(V(Ge,{url:e.src,error:a(n)},null,8,["url","error"]),[[X,!a(o)&&a(n)]]),f("div",{ref_key:"viewer",ref:y,class:"pdf__viewer pdfViewer"},null,512),O(i.$slots,"default",{page:a(u),scale:a(c),totalPage:a(v),zoomIn:P,zoomOut:D,next:E,prev:S,first:L,last:N,doc:a(_)})],512),O(i.$slots,"container",{page:a(u),scale:a(c),totalPage:a(v),zoomIn:P,zoomOut:D,next:E,prev:S,first:L,last:N,doc:a(_)}),V(ve,{name:"slide-up"},{default:H(()=>[M(V(_e,{"first-nav-label":e.firstNavLabel,"last-nav-label":e.lastNavLabel,"num-of-pages-nav-label":e.numOfPagesNavLabel},null,8,["first-nav-label","last-nav-label","num-of-pages-nav-label"]),[[X,e.src&&!a(w)&&!a(o)&&!a(n)]])]),_:1}),O(i.$slots,"body",{page:a(u),scale:a(c),totalPage:a(v),zoomIn:P,zoomOut:D,next:E,prev:S,first:L,last:N,doc:a(_)})]),_:3}),f("div",He,[O(i.$slots,"footer",{page:a(u),scale:a(c),totalPage:a(v),zoomIn:P,zoomOut:D,next:E,prev:S,first:L,last:N,doc:a(_)})])],10,We)),[[a(ne),e.layout==="fixed"?Number(e.ratio):0]])}});export{Ne as D,it as _};
