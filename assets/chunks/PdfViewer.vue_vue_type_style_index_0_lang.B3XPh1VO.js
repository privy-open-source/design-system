const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/interact.min.BKitjnf_.js","assets/chunks/commonjsHelpers.BosuxZz1.js"])))=>i.map(i=>d[i]);
import{D as T,p as V,ay as ue,X as q,V as K,d as H,o as X,c as J,j as h,k as a,v as oe,an as I,G as R,w as Z,a as fe,t as U,a6 as ne,r as j,h as ie,q as W,$ as pe,n as he,ao as Y,T as ge}from"./framework.CI6Dj8yt.js";import{v as se}from"./index.F8WrAqlk.js";import{i as ve,h as te}from"./index.BOVvX8vw.js";import{P as ye,c as we,d as me,e as xe,_ as _e,g as be}from"./use-idle.CCXq_mMU.js";import{_ as Pe}from"./Heading.vue_vue_type_script_setup_true_lang.B_I4QezC.js";/* empty css                                                */import{w as ce,a as le}from"./theme.Bp9Gcb-t.js";import{u as De}from"./use-loading.BK4NNwD_.js";import{u as ae,a as Ee}from"./index.DDyPugY2.js";import{p as G,c as Le,b as Se,s as re}from"./index.CQImwLBD.js";const Ne=Symbol("DropzoneContext");function Te(e,s){const u=T(!0),t=T(),r=V(),f=V();async function g(){if(x(),e.value){const{default:_}=await K(async()=>{const{default:l}=await import("./interact.min.BKitjnf_.js").then(m=>m.i);return{default:l}},__vite__mapDeps([0,1]));_.dynamicDrop(!0),t.value=_(s.value,{context:e.value}).dropzone({accept:".pdf-object",overlap:.95,enabled:u.value,checker(l,m,$,C,B,p,d){var v;return $&&(((v=e.value)==null?void 0:v.contains(d))||d.classList.contains("pdf-object--external"))},ondragenter(l){f.value=l.target,l.target.classList.add("hover")},ondragleave(l){l.target.classList.remove("hover")},ondrop(l){f.value=l.target,r.value=l.target,l.target.classList.remove("hover")}})}}function x(){t.value&&t.value.unset()}return ve(e,_=>{_.some(m=>m.type==="childList"&&m.target.matches(s.value))&&g()},{subtree:!0,childList:!0}),ue(()=>{x()}),q(Ne,{dropzone:r,hoverzone:f}),u}const ke="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='595'%20height='842'%20aria-labelledby='loading-aria'%20preserveAspectRatio='none'%20role='img'%20viewBox='0%200%20595%20842'%3e%3ctitle%20id='loading-aria'%3eLoading...%3c/title%3e%3crect%20width='100%25'%20height='100%25'%20x='0'%20y='0'%20clip-path='url(%23clip-path)'%20style='fill:url(%23fill)'/%3e%3cdefs%3e%3cclipPath%20id='clip-path'%3e%3crect%20width='191'%20height='14'%20x='44'%20y='64'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='44'%20y='94'%20rx='2.068'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='152'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='182'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='212'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='242'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='272'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='302'%20rx='7'/%3e%3crect%20width='349'%20height='14'%20x='44'%20y='332'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='390'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='420'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='450'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='480'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='510'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='540'%20rx='7'/%3e%3crect%20width='183'%20height='14'%20x='44'%20y='570'%20rx='7'/%3e%3crect%20width='191'%20height='14'%20x='360'%20y='628'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='411'%20y='678'%20rx='2.068'/%3e%3crect%20width='191'%20height='14'%20x='44'%20y='64'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='44'%20y='94'%20rx='2.068'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='152'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='182'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='212'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='242'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='272'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='302'%20rx='7'/%3e%3crect%20width='349'%20height='14'%20x='44'%20y='332'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='390'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='420'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='450'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='480'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='510'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='540'%20rx='7'/%3e%3crect%20width='183'%20height='14'%20x='44'%20y='570'%20rx='7'/%3e%3crect%20width='191'%20height='14'%20x='360'%20y='628'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='411'%20y='678'%20rx='2.068'/%3e%3c/clipPath%3e%3clinearGradient%20id='fill'%3e%3cstop%20offset='.6'%20stop-color='%23E7E7E8'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='-2;%20-2;%201'/%3e%3c/stop%3e%3cstop%20offset='1.6'%20stop-color='%23CFCFD1'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='-1;%20-1;%202'/%3e%3c/stop%3e%3cstop%20offset='2.6'%20stop-color='%23E7E7E8'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='0;%200;%203'/%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Ve={"data-testid":"pdf-loading",class:"pdf__loading"},$e=["src"],Ce=H({__name:"PdfLoading",setup(e){return(s,u)=>(X(),J("div",Ve,[h("img",{src:a(ke),width:"793",height:"1122"},null,8,$e)]))}});let A,M;async function Q(){if(!A){const e=await K(()=>import("./pdf.BxIWzeBb.js"),[]);typeof window<"u"&&"Worker"in window&&(e.GlobalWorkerOptions.workerSrc=ce(`pdfjs-dist@${e.version}/legacy/build/pdf.worker.min.mjs`,le())),A=e}return A}async function ee(){return await Q(),M||(M=await K(()=>import("./pdf_viewer.ZQKlLPJO.js"),[])),M}async function Oe(...e){return await Q(),A.getDocument(...e)}async function Re(){return ce(`pdfjs-dist@${await de()}/cmaps/`,le())}async function de(){return await Q(),A.version}async function je(){return await ee(),new M.EventBus}async function Me(...e){return await ee(),new M.PDFViewer(...e)}async function Be(...e){return await ee(),new M.PDFLinkService(...e)}function Fe(e){const s=[...e];return e[0]>e[2]&&(s[0]=e[2],s[2]=e[0]),e[1]>e[3]&&(s[1]=e[3],s[3]=e[1]),s}const ze={"data-testid":"pdf-error",class:"pdf__error"},Ie={class:"mt-7"},Ae={class:"truncate"},Ge=["href"],We=H({__name:"PdfError",props:{url:{type:String,default:""},error:{type:Object,default:()=>({})}},setup(e){const s=V("");return oe(async()=>{s.value=await de()}),(u,t)=>I((X(),J("div",ze,[R(Pe,{element:"h3"},{default:Z(()=>t[0]||(t[0]=[fe(" Failed to load PDF ")])),_:1}),h("dl",Ie,[t[1]||(t[1]=h("dt",null,"URL:",-1)),h("dd",Ae,[h("a",{href:e.url,target:"_blank"},[h("code",null,U(e.url),1)],8,Ge)]),t[2]||(t[2]=h("dt",null," Reason: ",-1)),h("dd",null,[h("code",null,U(e.error.message),1)]),t[3]||(t[3]=h("dt",null," PDFJS Version: ",-1)),h("dd",null,[h("code",null,U(a(s)),1)])])])),[[a(se),1122/793]])}}),He=H({__name:"PdfObjects",props:{dropTarget:{type:String,default:".pdfViewer > .page"}},setup(e){const s=e,u=new Map,t=V(),r=we(),f=ne(s,"dropTarget");return Te(t,f),q(ye,{...r,objects:u,root:t}),(g,x)=>(X(),J("div",{ref_key:"root",ref:t,class:"pdf-objects","data-testid":"pdf-objects"},[j(g.$slots,"default")],512))}});function Xe(e,s){const u=T(),t=T(),r=T(),f=T(),g=T(),x=ie(()=>{var o,i;return(i=(o=u.value)==null?void 0:o.numPages)!=null?i:0}),_=ae(1,.1,2),l=ae(1,1,Ee(x,1)),m=De(),$=T(!1),C=T(),B=G(),p=G(),d=G(),v=G();async function F(o,i,w={}){m.value=!0,C.value=void 0;try{await z(),o&&(f.value=await Oe({url:o,password:i,cMapUrl:await Re(),cMapPacked:!0,disableStream:w.disableStream,disableRange:w.disableRange,httpHeaders:w.httpHeaders}),f.value.onProgress=p.trigger,u.value=await f.value.promise,r.value.setDocument(u.value),g.value.setDocument(u.value),B.trigger(u.value))}catch(y){y instanceof Error&&(C.value=y,d.trigger(y))}finally{m.value=!1}}async function z(){var o,i;f.value&&!f.value.destroyed&&(await f.value.destroy(),u.value=void 0,f.value=void 0,(o=r.value)==null||o.setDocument(null),(i=g.value)==null||i.setDocument(null))}async function k(){if(typeof navigator<"u"&&e.value&&s.value){const o=await je();o.on("pagesinit",()=>{var y,O;const i=(O=(y=s.value)==null?void 0:y.clientWidth)!=null?O:0,w=i>0&&i<793;r.value.currentScaleValue=w?"page-width":"1",r.value.currentPageNumber=l.value,$.value=!0,v.trigger(r.value)}),o.on("pagechanging",i=>{l.value=i.pageNumber}),o.on("scalechanging",i=>{_.value=i.scale}),o.on("annotationlayerrendered",async i=>{if(!i.error){const w=i.source,y=w.pdfPage,O=await y.getAnnotations();for(const c of O)if(c.noHTML&&!w.annotationLayer.annotationStorage.has(c.id)){const{pageWidth:b,pageHeight:P,pageX:E,pageY:L}=w.viewport.rawDims,S=c.rotation%180===0?c.rect[2]-c.rect[0]:c.rect[3]-c.rect[1],N=c.rotation%180===0?c.rect[3]-c.rect[1]:c.rect[2]-c.rect[0],n=Fe([c.rect[0],y.view[3]-c.rect[1]+y.view[1],c.rect[2],y.view[3]-c.rect[3]+y.view[1]]),D=document.createElement("div");D.classList.add("annotationWidget",c.subtype,c.fieldType),D.style.left=`${100*(n[0]-E)/b}%`,D.style.top=`${100*(n[1]-L)/P}%`,D.style.width=`${100*S/b}%`,D.style.height=`${100*N/P}%`,w.annotationLayer.div.append(D),w.annotationLayer.annotationStorage.setValue(c.id,{div:D})}}}),t.value=o,g.value=await Be({eventBus:t.value}),r.value=await Me({container:e.value,viewer:s.value,eventBus:t.value,linkService:g.value,removePageBorders:!0,annotationEditorMode:-1}),g.value.setViewer(r.value)}}return W([e,s],async([o,i])=>{r.value?o&&i&&(r.value.container=o,r.value.viewer=i,u.value&&r.value.setDocument(u.value),r.value.update()):await k()}),W(l,o=>{r.value&&o!==r.value.currentPageNumber&&(r.value.currentPageNumber=o)}),W(_,o=>{r.value&&o!==r.value.currentScale&&(r.value.currentScale=o)}),pe(async()=>{var o;await z(),(o=r.value)==null||o.cleanup()}),{page:l,scale:_,totalPage:x,loading:m,error:C,ready:$,openDoc:F,closeDoc:z,pdfDoc:u,pdfEventBus:t,pdfViewer:r,pdfLoadingTask:f,pdfLinkService:g,onLoaded:B.on,onError:d.on,onReady:v.on,onLoading:p.on}}const Je=["data-page","data-scale"],Ue={class:"pdf__header"},Ye={class:"pdf__footer"},it=H({__name:"PdfViewer",props:{src:{type:String,default:""},page:{type:Number,default:1},scale:{type:Number,default:1},password:{type:String,default:void 0},layout:{type:String,default:"fixed"},ratio:{type:[Number,String],default:210/297},offsetTop:{type:[Number,String],default:0},config:{type:[Object],default:()=>({})},firstNavLabel:{type:String,default:"First"},lastNavLabel:{type:String,default:"Last"},numOfPagesNavLabel:{type:String,default:"of"}},emits:["ready","loaded","loading","error","error-password","update:page","update:scale"],setup(e,{expose:s,emit:u}){const t=e,r=u,f=V(),g=V(),x=V(),_=me(g),l=te(t,"page"),m=te(t,"scale"),$=Le(ne(t,"offsetTop"),{nanToZero:!0}),C=xe(f,{offsetTop:$}),B=ie(()=>{const n=[];return t.layout&&n.push(`pdf-viewer--layout-${t.layout}`),n}),{page:p,scale:d,totalPage:v,openDoc:F,closeDoc:z,pdfDoc:k,loading:o,error:i,onLoaded:w,onError:y,onReady:O,onLoading:c}=Xe(g,x);Se(()=>[t.src,t.password],([n,D])=>{F(n,D,t.config)},{debounce:500}),W(()=>t.layout,n=>{C.value=n==="fit"},{immediate:!0}),oe(async()=>{t.src&&F(t.src,t.password,t.config)}),w(n=>{r("loaded",n)}),y(n=>{n.name==="PasswordException"&&r("error-password",n),r("error",n)}),O(n=>{r("ready",n)}),c(n=>{r("loading",n)});function b(){d.value=Math.round(d.value/.1)*.1+.1}function P(){d.value=Math.round(d.value/.1)*.1-.1}function E(){p.value++}function L(){p.value--}function S(){p.value=1}function N(){p.value=v.value}return q(be,{page:p,scale:d,totalPage:v,zoomIn:b,zoomOut:P,next:E,prev:L,first:S,last:N}),re(p,l),re(d,m),s({page:p,scale:d,root:f,container:g,viewer:x,loading:o,totalPage:v,zoomIn:b,zoomOut:P,next:E,prev:L,openDoc:F,closeDoc:z,first:S,last:N}),(n,D)=>I((X(),J("div",{ref_key:"root",ref:f,"data-testid":"pdf-viewer",class:he(["pdf",a(B)]),"data-page":a(p),"data-scale":a(d)},[h("div",Ue,[j(n.$slots,"header",{page:a(p),scale:a(d),totalPage:a(v),zoomIn:b,zoomOut:P,next:E,prev:L,first:S,last:N,doc:a(k)})]),R(He,{class:"pdf__wrapper"},{default:Z(()=>[h("div",{ref_key:"container",ref:g,class:"pdf__container pdfContainer"},[I(R(Ce,null,null,512),[[Y,a(o)||!e.src]]),I(R(We,{url:e.src,error:a(i)},null,8,["url","error"]),[[Y,!a(o)&&a(i)]]),h("div",{ref_key:"viewer",ref:x,class:"pdf__viewer pdfViewer"},null,512),j(n.$slots,"default",{page:a(p),scale:a(d),totalPage:a(v),zoomIn:b,zoomOut:P,next:E,prev:L,first:S,last:N,doc:a(k)})],512),j(n.$slots,"container",{page:a(p),scale:a(d),totalPage:a(v),zoomIn:b,zoomOut:P,next:E,prev:L,first:S,last:N,doc:a(k)}),R(ge,{name:"slide-up"},{default:Z(()=>[I(R(_e,{"first-nav-label":e.firstNavLabel,"last-nav-label":e.lastNavLabel,"num-of-pages-nav-label":e.numOfPagesNavLabel},null,8,["first-nav-label","last-nav-label","num-of-pages-nav-label"]),[[Y,e.src&&!a(_)&&!a(o)&&!a(i)]])]),_:1}),j(n.$slots,"body",{page:a(p),scale:a(d),totalPage:a(v),zoomIn:b,zoomOut:P,next:E,prev:L,first:S,last:N,doc:a(k)})]),_:3}),h("div",Ye,[j(n.$slots,"footer",{page:a(p),scale:a(d),totalPage:a(v),zoomIn:b,zoomOut:P,next:E,prev:L,first:S,last:N,doc:a(k)})])],10,Je)),[[a(se),e.layout==="fixed"?Number(e.ratio):0]])}});export{Ne as D,it as _};
