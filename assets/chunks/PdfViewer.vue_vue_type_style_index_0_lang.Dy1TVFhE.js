const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/interact.min.BKitjnf_.js","assets/chunks/commonjsHelpers.BosuxZz1.js"])))=>i.map(i=>d[i]);
import{D as $,p as k,ay as ue,X as q,V as K,d as X,o as H,c as J,j as g,k as a,v as ne,an as F,G as R,w as Z,a as fe,t as U,a6 as oe,r as j,h as ie,q as W,$ as pe,n as he,ao as Y,T as ge}from"./framework.CI6Dj8yt.js";import{v as se}from"./index.F8WrAqlk.js";import{j as ve,i as te}from"./index.CcwQOeXo.js";import{P as ye,c as we,d as me,e as xe,_ as _e,g as be}from"./use-idle.DOXDiBWV.js";import{_ as Pe}from"./Heading.vue_vue_type_script_setup_true_lang.B_I4QezC.js";/* empty css                                                */import{w as ce,a as le}from"./theme.Bp9Gcb-t.js";import{u as De}from"./use-loading.BK4NNwD_.js";import{u as ae,a as Se}from"./index.DDyPugY2.js";import{p as G,c as Ee,b as Le,s as re}from"./index.CQImwLBD.js";const Ne=Symbol("DropzoneContext");function $e(e,s){const d=$(!0),t=$(),r=k(),u=k();async function v(){if(P(),e.value){const{default:D}=await K(async()=>{const{default:c}=await import("./interact.min.BKitjnf_.js").then(x=>x.i);return{default:c}},__vite__mapDeps([0,1]));D.dynamicDrop(!0),t.value=D(s.value,{context:e.value}).dropzone({accept:".pdf-object",overlap:.95,enabled:d.value,checker(c,x,V,C,M,h,l){var y;return V&&(((y=e.value)==null?void 0:y.contains(l))||l.classList.contains("pdf-object--external"))},ondragenter(c){u.value=c.target,c.target.classList.add("hover")},ondragleave(c){c.target.classList.remove("hover")},ondrop(c){u.value=c.target,r.value=c.target,c.target.classList.remove("hover")}})}}function P(){t.value&&t.value.unset()}return ve(e,D=>{D.some(x=>x.type==="childList"&&x.target.matches(s.value))&&v()},{subtree:!0,childList:!0}),ue(()=>{P()}),q(Ne,{dropzone:r,hoverzone:u}),d}const Te="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='595'%20height='842'%20aria-labelledby='loading-aria'%20preserveAspectRatio='none'%20role='img'%20viewBox='0%200%20595%20842'%3e%3ctitle%20id='loading-aria'%3eLoading...%3c/title%3e%3crect%20width='100%25'%20height='100%25'%20x='0'%20y='0'%20clip-path='url(%23clip-path)'%20style='fill:url(%23fill)'/%3e%3cdefs%3e%3cclipPath%20id='clip-path'%3e%3crect%20width='191'%20height='14'%20x='44'%20y='64'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='44'%20y='94'%20rx='2.068'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='152'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='182'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='212'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='242'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='272'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='302'%20rx='7'/%3e%3crect%20width='349'%20height='14'%20x='44'%20y='332'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='390'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='420'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='450'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='480'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='510'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='540'%20rx='7'/%3e%3crect%20width='183'%20height='14'%20x='44'%20y='570'%20rx='7'/%3e%3crect%20width='191'%20height='14'%20x='360'%20y='628'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='411'%20y='678'%20rx='2.068'/%3e%3crect%20width='191'%20height='14'%20x='44'%20y='64'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='44'%20y='94'%20rx='2.068'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='152'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='182'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='212'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='242'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='272'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='302'%20rx='7'/%3e%3crect%20width='349'%20height='14'%20x='44'%20y='332'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='390'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='420'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='450'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='480'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='510'%20rx='7'/%3e%3crect%20width='507'%20height='14'%20x='44'%20y='540'%20rx='7'/%3e%3crect%20width='183'%20height='14'%20x='44'%20y='570'%20rx='7'/%3e%3crect%20width='191'%20height='14'%20x='360'%20y='628'%20rx='2.068'/%3e%3crect%20width='140'%20height='14'%20x='411'%20y='678'%20rx='2.068'/%3e%3c/clipPath%3e%3clinearGradient%20id='fill'%3e%3cstop%20offset='.6'%20stop-color='%23E7E7E8'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='-2;%20-2;%201'/%3e%3c/stop%3e%3cstop%20offset='1.6'%20stop-color='%23CFCFD1'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='-1;%20-1;%202'/%3e%3c/stop%3e%3cstop%20offset='2.6'%20stop-color='%23E7E7E8'%20stop-opacity='1'%3e%3canimate%20attributeName='offset'%20dur='2s'%20keyTimes='0;%200.25;%201'%20repeatCount='indefinite'%20values='0;%200;%203'/%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",ke={"data-testid":"pdf-loading",class:"pdf__loading"},Ve=["src"],Ce=X({__name:"PdfLoading",setup(e){return(s,d)=>(H(),J("div",ke,[g("img",{src:a(Te),width:"793",height:"1122"},null,8,Ve)]))}});let A,B;async function Q(){if(!A){const e=await K(()=>import("./pdf.BxIWzeBb.js"),[]);typeof window<"u"&&"Worker"in window&&(e.GlobalWorkerOptions.workerSrc=ce(`pdfjs-dist@${e.version}/legacy/build/pdf.worker.min.mjs`,le())),A=e}return A}async function ee(){return await Q(),B||(B=await K(()=>import("./pdf_viewer.ZQKlLPJO.js"),[])),B}async function Oe(...e){return await Q(),A.getDocument(...e)}async function Re(){return ce(`pdfjs-dist@${await de()}/cmaps/`,le())}async function de(){return await Q(),A.version}async function je(){return await ee(),new B.EventBus}async function Be(...e){return await ee(),new B.PDFViewer(...e)}async function Me(...e){return await ee(),new B.PDFLinkService(...e)}function Ie(e){const s=[...e];return e[0]>e[2]&&(s[0]=e[2],s[2]=e[0]),e[1]>e[3]&&(s[1]=e[3],s[3]=e[1]),s}const ze={"data-testid":"pdf-error",class:"pdf__error"},Fe={class:"mt-7"},Ae={class:"truncate"},Ge=["href"],We=X({__name:"PdfError",props:{url:{type:String,default:""},error:{type:Object,default:()=>({})}},setup(e){const s=k("");return ne(async()=>{s.value=await de()}),(d,t)=>F((H(),J("div",ze,[R(Pe,{element:"h3"},{default:Z(()=>t[0]||(t[0]=[fe(" Failed to load PDF ")])),_:1}),g("dl",Fe,[t[1]||(t[1]=g("dt",null,"URL:",-1)),g("dd",Ae,[g("a",{href:e.url,target:"_blank"},[g("code",null,U(e.url),1)],8,Ge)]),t[2]||(t[2]=g("dt",null," Reason: ",-1)),g("dd",null,[g("code",null,U(e.error.message),1)]),t[3]||(t[3]=g("dt",null," PDFJS Version: ",-1)),g("dd",null,[g("code",null,U(a(s)),1)])])])),[[a(se),1122/793]])}}),Xe=X({__name:"PdfObjects",props:{dropTarget:{type:String,default:".pdfViewer > .page"}},setup(e){const s=e,d=new Map,t=k(),r=we(),u=oe(s,"dropTarget");return $e(t,u),q(ye,{...r,objects:d,root:t}),(v,P)=>(H(),J("div",{ref_key:"root",ref:t,class:"pdf-objects","data-testid":"pdf-objects"},[j(v.$slots,"default")],512))}});function He(e,s){const d=$(),t=$(),r=$(),u=$(),v=$(),P=ie(()=>{var n,i;return(i=(n=d.value)==null?void 0:n.numPages)!=null?i:0}),D=ae(1,.1,2),c=ae(1,1,Se(P,1)),x=De(),V=$(!1),C=$(),M=G(),h=G(),l=G(),y=G();async function I(n,i,m={}){x.value=!0,C.value=void 0;try{await z(),n&&(u.value=await Oe({url:n,password:i,cMapUrl:await Re(),cMapPacked:!0,disableStream:m.disableStream,disableRange:m.disableRange,httpHeaders:m.httpHeaders}),u.value.onProgress=h.trigger,d.value=await u.value.promise,r.value.setDocument(d.value),v.value.setDocument(d.value),M.trigger(d.value))}catch(w){w instanceof Error&&(C.value=w,l.trigger(w))}finally{x.value=!1}}async function z(){var n,i;u.value&&!u.value.destroyed&&(await u.value.destroy(),d.value=void 0,u.value=void 0,(n=r.value)==null||n.setDocument(null),(i=v.value)==null||i.setDocument(null))}async function T(){if(typeof navigator<"u"&&e.value&&s.value){const n=await je();n.on("pagesinit",()=>{var w,O;const i=(O=(w=s.value)==null?void 0:w.clientWidth)!=null?O:0,m=i>0&&i<793;r.value.currentScaleValue=m?"page-width":"1",r.value.currentPageNumber=c.value,V.value=!0,y.trigger(r.value)}),n.on("pagechanging",i=>{c.value=i.pageNumber}),n.on("scalechanging",i=>{D.value=i.scale}),n.on("annotationlayerrendered",async i=>{if(!i.error){const m=i.source,w=m.pdfPage,O=await w.getAnnotations();for(const f of O)if(f.annotationType===20&&f.fieldType==="Sig"&&!m.annotationLayer.annotationStorage.has(f.id)){const{pageWidth:_,pageHeight:b,pageX:L,pageY:N}=m.viewport.rawDims,S=f.rect[2]-f.rect[0],E=f.rect[3]-f.rect[1],o=Ie([f.rect[0],w.view[3]-f.rect[1]+w.view[1],f.rect[2],w.view[3]-f.rect[3]+w.view[1]]),p=document.createElement("section");p.dataset.annotationId=f.id,p.tabIndex=1e3,p.className="signatureWidgetAnnotation",p.role="img",p.id=`pdfjs_internal_id_${f.id}`,p.style.zIndex="0",p.style.left=`${100*(o[0]-L)/_}%`,p.style.top=`${100*(o[1]-N)/b}%`,f.rotation===0?(p.style.width=`${100*S/_}%`,p.style.height=`${100*E/b}%`):(p.style.width=`${100*E/_}%`,p.style.height=`${100*S/b}%`,p.dataset.mainRotation=`${(360-f.rotation)%360}`),m.annotationLayer.div.append(p),m.annotationLayer.annotationStorage.setValue(f.id,{div:p})}}}),t.value=n,v.value=await Me({eventBus:t.value}),r.value=await Be({container:e.value,viewer:s.value,eventBus:t.value,linkService:v.value,removePageBorders:!0,annotationEditorMode:-1}),v.value.setViewer(r.value)}}return W([e,s],async([n,i])=>{r.value?n&&i&&(r.value.container=n,r.value.viewer=i,d.value&&r.value.setDocument(d.value),r.value.update()):await T()}),W(c,n=>{r.value&&n!==r.value.currentPageNumber&&(r.value.currentPageNumber=n)}),W(D,n=>{r.value&&n!==r.value.currentScale&&(r.value.currentScale=n)}),pe(async()=>{var n;await z(),(n=r.value)==null||n.cleanup()}),{page:c,scale:D,totalPage:P,loading:x,error:C,ready:V,openDoc:I,closeDoc:z,pdfDoc:d,pdfEventBus:t,pdfViewer:r,pdfLoadingTask:u,pdfLinkService:v,onLoaded:M.on,onError:l.on,onReady:y.on,onLoading:h.on}}const Je=["data-page","data-scale"],Ue={class:"pdf__header"},Ye={class:"pdf__footer"},it=X({__name:"PdfViewer",props:{src:{type:String,default:""},page:{type:Number,default:1},scale:{type:Number,default:1},password:{type:String,default:void 0},layout:{type:String,default:"fixed"},ratio:{type:[Number,String],default:210/297},offsetTop:{type:[Number,String],default:0},config:{type:[Object],default:()=>({})},firstNavLabel:{type:String,default:"First"},lastNavLabel:{type:String,default:"Last"},numOfPagesNavLabel:{type:String,default:"of"}},emits:["ready","loaded","loading","error","error-password","update:page","update:scale"],setup(e,{expose:s,emit:d}){const t=e,r=d,u=k(),v=k(),P=k(),D=me(v),c=te(t,"page"),x=te(t,"scale"),V=Ee(oe(t,"offsetTop"),{nanToZero:!0}),C=xe(u,{offsetTop:V}),M=ie(()=>{const o=[];return t.layout&&o.push(`pdf-viewer--layout-${t.layout}`),o}),{page:h,scale:l,totalPage:y,openDoc:I,closeDoc:z,pdfDoc:T,loading:n,error:i,onLoaded:m,onError:w,onReady:O,onLoading:f}=He(v,P);Le(()=>[t.src,t.password],([o,p])=>{I(o,p,t.config)},{debounce:500}),W(()=>t.layout,o=>{C.value=o==="fit"},{immediate:!0}),ne(async()=>{t.src&&I(t.src,t.password,t.config)}),m(o=>{r("loaded",o)}),w(o=>{o.name==="PasswordException"&&r("error-password",o),r("error",o)}),O(o=>{r("ready",o)}),f(o=>{r("loading",o)});function _(){l.value=Math.round(l.value/.1)*.1+.1}function b(){l.value=Math.round(l.value/.1)*.1-.1}function L(){h.value++}function N(){h.value--}function S(){h.value=1}function E(){h.value=y.value}return q(be,{page:h,scale:l,totalPage:y,zoomIn:_,zoomOut:b,next:L,prev:N,first:S,last:E}),re(h,c),re(l,x),s({page:h,scale:l,root:u,container:v,viewer:P,loading:n,totalPage:y,zoomIn:_,zoomOut:b,next:L,prev:N,openDoc:I,closeDoc:z,first:S,last:E}),(o,p)=>F((H(),J("div",{ref_key:"root",ref:u,"data-testid":"pdf-viewer",class:he(["pdf",a(M)]),"data-page":a(h),"data-scale":a(l)},[g("div",Ue,[j(o.$slots,"header",{page:a(h),scale:a(l),totalPage:a(y),zoomIn:_,zoomOut:b,next:L,prev:N,first:S,last:E,doc:a(T)})]),R(Xe,{class:"pdf__wrapper"},{default:Z(()=>[g("div",{ref_key:"container",ref:v,class:"pdf__container pdfContainer"},[F(R(Ce,null,null,512),[[Y,a(n)||!e.src]]),F(R(We,{url:e.src,error:a(i)},null,8,["url","error"]),[[Y,!a(n)&&a(i)]]),g("div",{ref_key:"viewer",ref:P,class:"pdf__viewer pdfViewer"},null,512),j(o.$slots,"default",{page:a(h),scale:a(l),totalPage:a(y),zoomIn:_,zoomOut:b,next:L,prev:N,first:S,last:E,doc:a(T)})],512),j(o.$slots,"container",{page:a(h),scale:a(l),totalPage:a(y),zoomIn:_,zoomOut:b,next:L,prev:N,first:S,last:E,doc:a(T)}),R(ge,{name:"slide-up"},{default:Z(()=>[F(R(_e,{"first-nav-label":e.firstNavLabel,"last-nav-label":e.lastNavLabel,"num-of-pages-nav-label":e.numOfPagesNavLabel},null,8,["first-nav-label","last-nav-label","num-of-pages-nav-label"]),[[Y,e.src&&!a(D)&&!a(n)&&!a(i)]])]),_:1}),j(o.$slots,"body",{page:a(h),scale:a(l),totalPage:a(y),zoomIn:_,zoomOut:b,next:L,prev:N,first:S,last:E,doc:a(T)})]),_:3}),g("div",Ye,[j(o.$slots,"footer",{page:a(h),scale:a(l),totalPage:a(y),zoomIn:_,zoomOut:b,next:L,prev:N,first:S,last:E,doc:a(T)})])],10,Je)),[[a(se),e.layout==="fixed"?Number(e.ratio):0]])}});export{Ne as D,it as _};
