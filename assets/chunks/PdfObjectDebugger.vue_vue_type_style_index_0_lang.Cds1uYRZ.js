import{m as l}from"./memoize.CLrPHVGY.js";import{a as g,c as m,b as _,o as y}from"./floating-ui.dom.D8eMPWlJ.js";import{b as x}from"./use-idle.DNpLroyr.js";import{d as w,L as b,p as v,s as E,o as k,c as M,j as d,t as c,k as u}from"./framework.CI6Dj8yt.js";function O(e,s){return{x:(s.width-e.width)/2,y:(s.height-e.height)/2}}function C(e,s){return e.x+e.width>s.width||e.y+e.height>s.height}function P(e){var o;const s=new Map,i=l(t=>Math.round(t/15)*15);for(const t of e){const r=i(t.x),a=i(t.y),n=(o=s.get(r))!=null?o:new Map;n.set(a,t),s.set(r,n)}return t=>{var n;const r=i(t.x),a=i(t.y);return((n=s.get(r))==null?void 0:n.get(a))!==void 0}}function J(e){var n;const s=(n=e.checkOverlap)!=null?n:P(e.objects),i=O(e.size,e.offside),o={...e.size,...i};let t=!0,r=0,a=0;do t=!0,C(o,e.offside)&&(o.y=i.y+a,o.x=i.x,a+=15,t=!1),s(o,e.objects)&&(o.x+=15,o.y+=15,t=!1);while(!t&&++r<=500);return t||console.warn("Cannot find empty position, max iteration reach"),o}const B={"data-testid":"debug-x"},z={"data-testid":"debug-y"},D={"data-testid":"debug-page"},T={"data-testid":"debug-width"},j={"data-testid":"debug-height"},L=w({__name:"PdfObjectDebugger",setup(e){const{x:s,y:i,page:o,width:t,height:r}=b(x),a=v();return E(n=>{if(a.value){const f=g(a.value.parentElement,a.value,()=>{m(a.value.parentElement,a.value,{strategy:"absolute",middleware:[_(),y(12)]}).then(({x:p,y:h})=>{a.value&&(a.value.style.left=`${p||0}px`,a.value.style.top=`${h||0}px`)})},{animationFrame:!0});n(f)}},{flush:"post"}),(n,f)=>(k(),M("div",{ref_key:"target",ref:a,"data-testid":"pdf-debugger",class:"pdf-object__debugger"},[d("pre",B,"x: "+c(u(s)),1),d("pre",z,"y: "+c(u(i)),1),d("pre",D,"page: "+c(u(o)),1),d("pre",T,"width: "+c(u(t)),1),d("pre",j,"height: "+c(u(r)),1)],512))}});export{L as _,J as g};
