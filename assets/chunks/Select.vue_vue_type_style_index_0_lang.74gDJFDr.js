import{d as j,a1 as ee,L as te,h as b,o as i,c as m,r as y,e as V,j as g,K as ae,k as r,n as O,F as I,C as M,b as v,w as f,a as C,t as h,p as x,q as le,al as q,G as B,ar as D,as as se,at as ne,a0 as F}from"./framework.CI6Dj8yt.js";import{_ as ie}from"./Dropdown.vue_vue_type_script_setup_true_lang.50_JyjHR.js";import{_ as oe}from"./Dropdown.vue_vue_type_style_index_0_lang.DNpByd8n.js";import{_ as de}from"./DropdownHeader.vue_vue_type_style_index_0_lang.BGAfNnv6.js";import{_ as re}from"./Input.vue_vue_type_script_setup_true_lang.DZPhP39w.js";/* empty css                                              */import{_ as ue}from"./Text.vue_vue_type_style_index_0_lang.BbwkHw2M.js";import{I as ce}from"./index.DvWHfs5K.js";import{_ as G}from"./Label.vue_vue_type_script_setup_true_lang.CrjUOEra.js";/* empty css                                              */import{I as fe}from"./20.4Lp1Y2VN.js";import{I as pe}from"./20.Bqg5dnPC.js";import{I as me}from"./20.DIEH4g8n.js";import{I as ye}from"./IconCheckbox.bQRnRVkI.js";import{_ as ve}from"./SpinnerRing.vue_vue_type_script_setup_true_lang.FuCTXNtW.js";import{i as A,v as he}from"./value.DLcxroFL.js";import{d as ge,u as be}from"./adapter.DZIn-_sx.js";import{u as Se}from"./use-loading.BK4NNwD_.js";import{c as ke}from"./index.BOVvX8vw.js";import{w as _e}from"./index.CQImwLBD.js";import{i as R}from"./isNil.CHIgUVhi.js";const $e={key:0,class:"input__prepend"},Ce=["disabled","readonly"],Ae={class:"input__form__activator"},Ve={key:1,class:"input__append"},xe=j({inheritAttrs:!1,__name:"SelectInput",props:{size:{type:String,default:"md"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},containerClass:{type:[String,Array,Object],default:void 0}},setup(e){const l=e,u=ee(),t=te(ce,void 0,!1),p=b(()=>{const o=[];return t!=null&&t.size.value?o.push(`input--${t==null?void 0:t.size.value}`):l.size&&o.push(`input--${l.size}`),l.disabled&&o.push("input--disabled"),l.readonly&&o.push("input--readonly"),l.error&&o.push("input--error","state--error"),u.prepend&&o.push("input--has-prepend"),u.append&&o.push("input--has-append"),o});return(o,S)=>(i(),m("div",{class:O(["input",e.containerClass]),"data-testid":"input-container"},[o.$slots.prepend?(i(),m("span",$e,[y(o.$slots,"prepend")])):V("",!0),S[0]||(S[0]=g("input",{class:"input__hidden",type:"text"},null,-1)),g("div",ae({class:["input__form",r(p)],"data-testid":"input",disabled:e.disabled,readonly:e.readonly,tabindex:1},o.$attrs),[g("div",Ae,[y(o.$slots,"default")])],16,Ce),o.$slots.append?(i(),m("span",Ve,[y(o.$slots,"append")])):V("",!0)],2))}}),Be={class:"select__tags"},Le=j({__name:"SelectTags",props:{items:{type:Array,default:()=>[]},displayLimit:{type:Number,default:2},limitText:{type:String,default:"+{n} Other(s)"}},setup(e){const l=e,u=b(()=>l.items.slice(0,l.displayLimit)),t=b(()=>l.limitText.replaceAll("{n}",String(l.items.length-l.displayLimit)));return(p,o)=>(i(),m("div",Be,[(i(!0),m(I,null,M(r(u),(S,k)=>(i(),v(G,{key:k,"data-testid":"select-tag",variant:"light",size:"xs"},{default:f(()=>[C(h(S.text),1)]),_:2},1024))),128)),e.items.length>e.displayLimit?(i(),v(G,{key:0,"data-testid":"select-tag-others",variant:"light",size:"xs"},{default:f(()=>[C(h(r(t)),1)]),_:1})):V("",!0)]))}});function w(e,l){var u;return(u=e.find(t=>A(t.value,l)))!=null?u:{text:"",value:void 0}}function N(e,l){return Array.isArray(l)?e.filter(u=>he(l,u.value)):[]}function ze(...e){const l=[];for(const u of e)for(const t of u)l.some(p=>A(t,p))||l.push(t);return l}const Ie=ge({setup({props:e,keyword:l}){const u=be(e);return b(()=>u.value.filter(p=>p.text.toLowerCase().includes(l.value.toLowerCase())))}}),Te={key:1,"data-testid":"select-placeholder"},we={class:"input__form__placeholder"},Ne={key:0,"data-testid":"select-no-data",class:"select__empty"},Oe={class:"select__option"},je={class:"select__option-text"},Ee={class:"select__option-checked"},Pe={key:2,"data-testid":"select-loading",class:"select__loading"},ot=j({models:{prop:"modelValue",event:"update:modelValue"},__name:"Select",props:{modelValue:{type:void 0,default:void 0},selected:{type:[Object,Array],default:void 0},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"Â "},emptyText:{type:String,default:"No Data"},loadingText:{type:String,default:"Loading..."},searchText:{type:String,default:"Search..."},adapter:{type:Object,default:()=>Ie},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},clearLabel:{type:String,default:"Clear"},size:{type:String,default:"md"},sectionLabel:{type:String,default:void 0},noCaret:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},displayLimit:{type:Number,default:void 0},limitText:{type:String,default:void 0},searchable:{type:Boolean,default:!0},menuSize:{type:String,default:void 0},menuClass:{type:[String,Array,Object],default:void 0},divider:{type:Boolean,default:!1},noAnimation:{type:Boolean,default:!1},noCloseAfterSelect:{type:Boolean,default:!1}},emits:["change","update:modelValue","update:selected","userInput"],setup(e,{expose:l,emit:u}){const t=e,p=u,o=x(),S=x(),k=b(()=>{var a;return(a=o.value)==null?void 0:a.input}),E=b(()=>{var a;return(a=S.value)==null?void 0:a.menuBody}),_=x(""),c=x(!1),L=Se({elapsed:!1}),H={props:t,keyword:_,isOpen:c,isLoading:L,menuEl:E},$=t.adapter.setup(H),n=x(t.multiple?N($.value,t.modelValue):w($.value,t.modelValue)),T=()=>{!t.disabled&&!t.readonly&&(c.value=!c.value)},K=b(()=>{const a=[];return c.value&&a.push("select--open"),t.disabled&&a.push("select--disabled"),t.readonly&&a.push("select--readonly"),t.multiple&&a.push("select--multiple"),a}),J=b(()=>{var a;return t.multiple?Array.isArray(n.value)&&n.value.length>0:!R((a=n.value)==null?void 0:a.value)}),{ignoreUpdates:Q}=_e(()=>t.modelValue,a=>{n.value=t.multiple?N($.value,a):w($.value,a)});le($,a=>{if(t.modelValue&&a.length>0)if(t.multiple){const s=N(a,t.modelValue);s.length>0&&(n.value=ze(n.value,s))}else{const s=w(a,t.modelValue);R(s.value)||(n.value=s)}});function P(a){let s=t.multiple?[]:{text:"",value:void 0};a&&(t.multiple&&Array.isArray(n.value)?s=n.value.some(d=>A(d.value,a.value))?n.value.filter(d=>!A(d.value,a.value)):[...n.value,a]:s=a),Q(()=>{n.value=s,p("change",s),p("update:selected",s),p("update:modelValue",t.multiple?s.map(d=>d.value):s==null?void 0:s.value)}),c.value&&p("userInput",s),t.noCloseAfterSelect||(c.value=!1)}function W(){!t.disabled&&!t.readonly&&(c.value=!0)}function X(){P()}function U(a){return t.multiple&&n.value.length===0||!t.multiple&&n.value.value===void 0?!1:t.multiple&&Array.isArray(n.value)?n.value.some(s=>A(a.value,s.value)):A(a.value,n.value.value)}function Y(){var a;(a=k.value)==null||a.focus()}function Z(){_.value=""}return ke(()=>{c.value&&k.value&&k.value!==document.activeElement&&(k.value.select(),k.value.focus())}),l({keyword:_,isOpen:c,isLoading:L,menuEl:E,toggle:T}),(a,s)=>(i(),v(ie,{ref_key:"dropdown",ref:S,modelValue:r(c),"onUpdate:modelValue":s[1]||(s[1]=d=>q(c)?c.value=d:null),class:O(["select",r(K)]),"data-testid":"select","aria-label":"select",disabled:e.disabled,divider:e.divider,"menu-size":e.menuSize,"menu-class":e.menuClass,"no-animation":e.noAnimation,onShow:Y,onHide:Z},{activator:f(d=>[y(a.$slots,"activator",se(ne(d)),()=>[B(xe,{"data-testid":"select-activator",class:"select__activator",size:e.size,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,error:e.error,onFocus:W},D({default:f(()=>[r(J)?y(a.$slots,"selected",{key:0,item:r(n),multiple:e.multiple},()=>{var z;return[t.multiple&&Array.isArray(r(n))?(i(),v(Le,{key:0,items:r(n),"display-limit":e.displayLimit,"limit-text":e.limitText},null,8,["items","display-limit","limit-text"])):(i(),m(I,{key:1},[C(h((z=r(n))==null?void 0:z.text),1)],64))]}):(i(),m("div",Te,[y(a.$slots,"placeholder",{},()=>[g("span",we,h(e.placeholder),1)])]))]),_:2},[e.noCaret?void 0:{name:"append",fn:f(()=>[y(a.$slots,"caret",{isOpen:r(c),toggle:T},()=>[B(fe,{class:"select__caret","data-testid":"select-caret-icon",onClick:T})])]),key:"0"}]),1032,["size","placeholder","disabled","readonly","error"])])]),prepend:f(()=>[e.searchable?(i(),v(re,{key:0,ref_key:"input",ref:o,modelValue:r(_),"onUpdate:modelValue":s[0]||(s[0]=d=>q(_)?_.value=d:null),"data-testid":"select-search",class:"select__search no--error",placeholder:e.searchText,clearable:!0},{append:f(()=>[B(me,{class:"select__search-icon"})]),_:1},8,["modelValue","placeholder"])):V("",!0)]),default:f(()=>[!r(L)&&r($).length===0?(i(),m("div",Ne,[y(a.$slots,"empty",{keyword:r(_)},()=>[C(h(e.emptyText),1)])])):(i(),m(I,{key:1},[e.sectionLabel||e.clearable?(i(),v(de,{key:0,"data-testid":"select-label"},D({default:f(()=>[C(h(e.sectionLabel),1)]),_:2},[e.clearable?{name:"action",fn:f(()=>[B(ue,{"data-testid":"select-clear",variant:"caption2",href:"javascript:void",onClick:F(X,["prevent"])},{default:f(()=>[C(h(e.clearLabel),1)]),_:1})]),key:"0"}:void 0]),1024)):V("",!0),(i(!0),m(I,null,M(r($),(d,z)=>(i(),v(oe,{key:z,"data-testid":"select-item",class:O({selected:U(d)}),disabled:!!d.disabled,onClick:F(Ue=>P(d),["prevent"])},{default:f(()=>[g("div",Oe,[g("div",je,[y(a.$slots,"option",{isSelected:U(d),item:d},()=>[C(h(d.text),1)])]),g("div",Ee,[e.multiple?(i(),v(ye,{key:0})):(i(),v(pe,{key:1}))])])]),_:2},1032,["class","disabled","onClick"]))),128))],64)),r(L)?(i(),m("div",Pe,[B(ve),y(a.$slots,"loading",{},()=>[g("span",null,h(e.loadingText),1)])])):V("",!0)]),_:3},8,["modelValue","disabled","divider","menu-size","menu-class","class","no-animation"]))}});export{ot as _};
